import{r as d,j as e,_ as ie,l as a,ad as dt,ae as pt,C as R,af as ut,ag as xt,ah as gt,ai as mt,aj as ht,ak as jt,al as ft,am as bt,an as yt,ao as Tt,ap as St,aq as Ct,ar as vt,as as It,at as Ge,au as wt,av as _t,aw as Et,K as Fe,ax as kt,ay as Pt,az as At,aA as Mt,aB as Lt,aC as Rt,aD as Ot,aE as Dt,aF as zt,aG as Nt,aH as ks,aI as gs,aJ as $e,aK as He,aL as Ft,aM as Bt,aN as Ps,aO as De,aP as As,aQ as Ze,aR as Vt,aS as Wt,aT as Kt,aU as Gt,aV as $t,aW as Ht,W as we,aX as Ms,a6 as cs,e as A,aY as Ut,aZ as ms,a_ as Ls,a$ as qt,b0 as Yt,b1 as Qt,b2 as ye,b3 as Xe,b4 as Xt,R as Ae,b5 as Jt,b6 as Zt,b7 as Ue,b8 as es,b9 as en,aa as bs,P as sn,y as ys,B as tn}from"./main-1.0.15.js";import{l as nn,a as an,b as rn,c as on,d as ln,e as cn,f as dn,g as pn,h as un,s as xn}from"./ActionsExplorer-1.0.15-15df1613.js";import{W as qe,X as Ye,B as l,Y as gn,a as H,u as k,Z as mn,_ as hn,i as jn,T as je,j as fn,$ as bn,E as yn,a0 as Tn,a1 as Be,A as as,g as rs,a2 as Sn,a3 as Cn,a4 as Rs,a5 as Os,h as Ds,a6 as vn,a7 as In,S as hs,c as ce,a8 as wn,n as _n,y as En,z as kn,C as Pn,v as An,d as zs,a9 as Mn,t as Ln}from"./main-1.0.15-e2ad00f6.js";import{a as Le,_ as Z,c as Ns,s as js,u as Rn,d as Ts,b as On,r as he,T as Se,I as ne,P as ds}from"./iconBase-1.0.15-5866dbfd.js";import{u as _e,M as Ee,B as Ss,T as Fs,a as Bs,b as ss,c as ee,d as Vs}from"./index.esm-1.0.15-f3c7e2e0.js";import{a as Ws,b as Ks,c as Gs,d as Dn}from"./index.esm-1.0.15-bb4db28d.js";import{T as zn,a as Nn}from"./index.esm-1.0.15-8ab178c0.js";import{u as $s,t as le,T as Fn,a as Bn,b as Vn,g as Wn,S as Kn}from"./TreeItem2Provider-1.0.15-ec13f5b1.js";import{f as Gn,D as $n,g as Hn,h as Un,C as xe,a as Je,T as ls,i as qn,S as ze,R as Yn,B as Qn,b as Xn,c as Jn,d as Zn,e as Cs}from"./settings-1.0.15-3913c57c.js";import{A as ae,C as ps,a as us,B as G,b as ea}from"./useScreenSize-1.0.15-a1dd46fa.js";import{C as pe}from"./Checkbox-1.0.15-19533231.js";import{L as fe,A as Ce}from"./Link-1.0.15-0c287b6b.js";import{a as sa,C as ta}from"./index-1.0.15-af0a2cb5.js";import{F as Y,b as se,T as re,S as Te,I as ts,a as ge,A as vs,C as Is}from"./TextField-1.0.15-73384817.js";import{C as na}from"./CardActions-1.0.15-e9dc43ac.js";import{I as ws}from"./InputAdornment-1.0.15-4ec316af.js";import{D as aa,a as ra,b as ia}from"./DialogContent-1.0.15-e50a43f8.js";import{M as W}from"./MenuItem-1.0.15-cb0e11e9.js";import{A as oa}from"./AdminMetaData-1.0.15-94af3dbb.js";import{S as la}from"./ScopeEnum-1.0.15-32d3ffad.js";import{A as ve,a as Ie}from"./AccordionSummary-1.0.15-ad1892ca.js";import{R as Hs}from"./RadioGroup-1.0.15-f84d6091.js";import{R as ns}from"./Radio-1.0.15-7d52029a.js";import{c as ca}from"./index-1.0.15-c2b31918.js";import{F as Ne}from"./FormControlLabel-1.0.15-2f48df6c.js";import{a as da}from"./index.esm-1.0.15-3dc3cbe3.js";import{g as pa}from"./ActionsDml-1.0.15-409ee4a6.js";import{T as _s}from"./Tabs-1.0.15-c2b715a3.js";import"./Close-1.0.15-8d33e66c.js";import"./Menu-1.0.15-3ae4ddd1.js";import"./AlertTitle-1.0.15-cc3002eb.js";import"./useSlot-1.0.15-4f7bfdbc.js";import"./ListItemIcon-1.0.15-b73952ad.js";import"./DateTimePicker-1.0.15-b600d307.js";import"./useMobilePicker-1.0.15-5df19a3e.js";import"./date-time-utils-1.0.15-31b6fdea.js";import"./dateViewRenderers-1.0.15-2bbfacab.js";import"./TimePicker-1.0.15-1545716b.js";import"./DatePicker-1.0.15-cd97ffeb.js";function ua(s){const{instance:t,selection:{multiSelect:r}}=$s(),n=t.isItemExpandable(s),i=t.isItemExpanded(s),o=t.isItemFocused(s),g=t.isItemSelected(s),x=t.isItemDisabled(s);return{disabled:x,expanded:i,selected:g,focused:o,handleExpansion:u=>{if(!x){o||t.focusItem(u,s);const S=r&&(u.shiftKey||u.ctrlKey||u.metaKey);n&&!(S&&t.isItemExpanded(s))&&t.toggleItemExpansion(u,s)}},handleSelection:u=>{x||(o||t.focusItem(u,s),r&&(u.shiftKey||u.ctrlKey||u.metaKey)?u.shiftKey?t.selectRange(u,{end:s}):t.selectItem(u,s,!0):t.selectItem(u,s))},preventSelection:u=>{(u.shiftKey||u.ctrlKey||u.metaKey||x)&&u.preventDefault()}}}const xa=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown"],Us=d.forwardRef(function(t,r){const{classes:n,className:i,displayIcon:o,expansionIcon:g,icon:x,label:m,itemId:y,onClick:c,onMouseDown:u}=t,S=Le(t,xa),{disabled:j,expanded:T,selected:v,focused:I,handleExpansion:M,handleSelection:N,preventSelection:D}=ua(y),L=x||g||o,F=E=>{D(E),u&&u(E)},P=E=>{M(E),N(E),c&&c(E)};return e.jsxs("div",Z({},S,{className:Ns(i,n.root,T&&n.expanded,v&&n.selected,I&&n.focused,j&&n.disabled),onClick:P,onMouseDown:F,ref:r,children:[e.jsx("div",{className:n.iconContainer,children:L}),e.jsx("div",{className:n.label,children:m})]}))}),ga=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],ma=["ownerState"],ha=["ownerState"],ja=["ownerState"],fa=s=>{const{classes:t}=s;return On({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],groupTransition:["groupTransition"]},Wn,t)},ba=js("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(s,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),ya=js(Us,{name:"MuiTreeItem",slot:"Content",overridesResolver:(s,t)=>[t.content,t.iconContainer&&{[`& .${le.iconContainer}`]:t.iconContainer},t.label&&{[`& .${le.label}`]:t.label}]})(({theme:s})=>({padding:s.spacing(.5,1),borderRadius:s.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:s.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${le.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${le.focused}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${le.selected}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:qe(s.palette.primary.main,s.palette.action.selectedOpacity),"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:qe(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:qe(s.palette.primary.main,s.palette.action.selectedOpacity)}},[`&.${le.focused}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.focusOpacity}))`:qe(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.focusOpacity)}},[`& .${le.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${le.label}`]:Z({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},s.typography.body1)})),Ta=js(Gn,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(s,t)=>t.groupTransition})({margin:0,padding:0,paddingLeft:12}),te=d.forwardRef(function(t,r){const{icons:n,runItemPlugins:i,selection:{multiSelect:o},disabledItemsFocusable:g,instance:x}=$s(),m=Rn({props:t,name:"MuiTreeItem"}),{children:y,className:c,slots:u,slotProps:S,ContentComponent:j=Us,ContentProps:T,itemId:v,id:I,label:M,onClick:N,onMouseDown:D,onBlur:L,onKeyDown:F}=m,P=Le(m,ga),{contentRef:E,rootRef:B}=i(m),O=Ts(r,B),b=Ts(T==null?void 0:T.ref,E),h={expandIcon:(u==null?void 0:u.expandIcon)??n.slots.expandIcon??Fn,collapseIcon:(u==null?void 0:u.collapseIcon)??n.slots.collapseIcon??Bn,endIcon:(u==null?void 0:u.endIcon)??n.slots.endIcon,icon:u==null?void 0:u.icon,groupTransition:u==null?void 0:u.groupTransition},f=V=>Array.isArray(V)?V.length>0&&V.some(f):!!V,C=f(y),_=x.isItemExpanded(v),w=x.isItemFocused(v),U=x.isItemSelected(v),z=x.isItemDisabled(v),X=Z({},m,{expanded:_,focused:w,selected:U,disabled:z}),q=fa(X),oe=h.groupTransition??void 0,Ve=Ye({elementType:oe,ownerState:{},externalSlotProps:S==null?void 0:S.groupTransition,additionalProps:{unmountOnExit:!0,in:_,component:"ul",role:"group"},className:q.groupTransition}),me=_?h.collapseIcon:h.expandIcon,We=Ye({elementType:me,ownerState:{},externalSlotProps:V=>_?Z({},he(n.slotProps.collapseIcon,V),he(S==null?void 0:S.collapseIcon,V)):Z({},he(n.slotProps.expandIcon,V),he(S==null?void 0:S.expandIcon,V))}),Ke=Le(We,ma),p=C&&me?e.jsx(me,Z({},Ke)):null,J=C?void 0:h.endIcon,Zs=Ye({elementType:J,ownerState:{},externalSlotProps:V=>C?{}:Z({},he(n.slotProps.endIcon,V),he(S==null?void 0:S.endIcon,V))}),et=Le(Zs,ha),st=J?e.jsx(J,Z({},et)):null,is=h.icon,tt=Ye({elementType:is,ownerState:{},externalSlotProps:S==null?void 0:S.icon}),nt=Le(tt,ja),at=is?e.jsx(is,Z({},nt)):null;let os;o?os=U:U&&(os=!0);function rt(V){!w&&(!z||g)&&V.currentTarget===V.target&&x.focusItem(V,v)}function it(V){L==null||L(V),x.removeFocusedItem()}const ot=V=>{F==null||F(V),x.handleItemKeyDown(V,v)},lt=x.getTreeItemId(v,I),ct=x.canItemBeTabbed(v)?0:-1;return e.jsx(Vn,{itemId:v,children:e.jsxs(ba,Z({className:Ns(q.root,c),role:"treeitem","aria-expanded":C?_:void 0,"aria-selected":os,"aria-disabled":z||void 0,id:lt,tabIndex:ct},P,{ownerState:X,onFocus:rt,onBlur:it,onKeyDown:ot,ref:O,children:[e.jsx(ya,Z({as:j,classes:{root:q.content,expanded:q.expanded,selected:q.selected,focused:q.focused,disabled:q.disabled,iconContainer:q.iconContainer,label:q.label},label:M,itemId:v,onClick:N,onMouseDown:D,icon:at,expansionIcon:p,displayIcon:st,ownerState:X},T,{ref:b})),y&&e.jsx(Ta,Z({as:oe},Ve,{children:y}))]}))})}),de=()=>e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"30px"},children:[e.jsx(gn,{sx:{width:"1em !important",height:"1em !important"}}),e.jsx(Se,{children:"Loading..."})]}),ke={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTablePaperProps:{sx:{display:"grid",boxShadow:"none"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyRowProps:{hover:!0},muiTableBodyCellProps:{sx:{verticalAlign:"top"}}},Pe=({msg:s})=>e.jsx(l,{sx:{padding:"1rem 0"},children:e.jsx(Se,{children:s})}),Sa=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),Ca=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>dt(c,s,t));a.debug(n);const i=k(c=>pt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{nn(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(ut({dbs:s,tbl:t,cls:u}))},c=>{a.error("error",c),g(c??R.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),y=_e({...ke,columns:m,data:i,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Sa,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table has no columns"}):(a.debug(i),e.jsx(Ee,{table:y})):e.jsx(de,{})},va=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),Ia=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>xt(c,s,t));a.debug(n);const i=k(c=>gt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{an(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(mt({dbs:s,tbl:t,idx:u}))},c=>{a.error("error",c),g(c??R.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),y=_e({...ke,columns:m,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(va,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table has no indexes"}):e.jsx(Ee,{table:y}):e.jsx(de,{})},wa=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),_a=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>ht(c,s,t));a.debug(n);const i=k(c=>jt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{rn(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(ft({dbs:s,tbl:t,trg:u}))},c=>{a.error("error",c),g(c??R.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:c})=>e.jsx("pre",{style:{padding:0,margin:0},children:c.getValue()})}],[]),y=_e({...ke,columns:m,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(wa,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table has no triggers"}):e.jsx(Ee,{table:y}):e.jsx(de,{})},Ea=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),ka=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>bt(c,s,t));a.debug(n);const i=k(c=>yt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{on(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(Tt({dbs:s,tbl:t,frk:u}))},c=>{a.error("error",c),g(c)})},m=d.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),y=_e({...ke,columns:m,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Ea,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table contains no foreign keys"}):e.jsx(Ee,{table:y}):e.jsx(de,{})};var K=(s=>(s[s.TABLE=0]="TABLE",s[s.VIEW=1]="VIEW",s))(K||{});const qs=d.memo(({dbs:s,tbl:t,typ:r})=>(a.debug(s,t,r),e.jsxs(e.Fragment,{children:[e.jsx(te,{itemId:s+"-"+t+"-columns",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(mn,{}),e.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ca,{dbs:s,tbl:t})}),r===K.TABLE&&e.jsxs(e.Fragment,{children:[e.jsx(te,{itemId:s+"-"+t+"-indexes",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(hn,{}),e.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ia,{dbs:s,tbl:t})}),e.jsx(te,{itemId:s+"-"+t+"-foreignkeys",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(zn,{}),e.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:e.jsx(ka,{dbs:s,tbl:t})}),e.jsx(te,{itemId:s+"-"+t+"-triggers",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(Ws,{}),e.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:e.jsx(_a,{dbs:s,tbl:t})})]})]})));var ue=(s=>(s[s.MANAGE=0]="MANAGE",s[s.EXPLORE=1]="EXPLORE",s))(ue||{});const Pa=s=>{const t=k(r=>St(r,s));return a.debug("tablesSelected",t),t},Aa=s=>{const t=k(r=>Ct(r,s));return a.debug("viewsSelected",t),t},Ys=d.memo(({dbs:s,tbl:t,typ:r,tableContext:n})=>{var y,c;a.debug(s,t,r);const i=H(),o=Pa(s),g=Aa(s),x=jn("(max-width:900px)"),m=d.useMemo(()=>(n==null?void 0:n.wp_tables)!==void 0&&n.wp_tables.filter(u=>u===t).length>0?" (WordPress Table)":(n==null?void 0:n.wpda_tables)!==void 0&&n.wpda_tables.filter(u=>u===t).length>0?" (Plugin Table)":"",[]);return e.jsxs(l,{color:"primary",sx:{display:"grid",gridTemplateColumns:"calc(100% - 110px) auto",justifyContent:"space-between",alignItems:"center",gridGap:"20px",marginLeft:"-10px","&:hover":{".pp-row-actions":{visibility:x?"hidden":"visible"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"0",overflow:"hidden"},children:[e.jsx(l,{sx:{display:"grid",alignItems:"center"},children:e.jsx(pe,{size:"small",checked:g.includes(t)||o.includes(t),onClick:u=>{r===K.VIEW?i(vt({dbs:s,vws:t,isSelected:!g.includes(t)})):i(It({dbs:s,tbl:t,isSelected:!o.includes(t)})),u.stopPropagation()}})}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[e.jsxs(l,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:[t," ",m]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center",visibility:"hidden"},className:"pp-row-actions",children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Manage table `"+t+"`",placement:"bottom",children:e.jsx(fe,{underline:"none",onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.MANAGE})),u.preventDefault(),u.stopPropagation()},children:"Manage"})}),e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Explore table `"+t+"`",placement:"bottom",children:e.jsx(fe,{underline:"none",onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.EXPLORE})),u.preventDefault(),u.stopPropagation()},children:"Explore"})})]})]})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-evenly",alignItems:"center"},children:[e.jsx(je,{title:"Manage table `"+t+"`",placement:"bottom",children:e.jsx(ne,{sx:{color:(y=ae)==null?void 0:y.palette.primary.main},onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.MANAGE})),u.preventDefault(),u.stopPropagation()},children:e.jsx(fn,{})})}),e.jsx(je,{title:"Explore table `"+t+"`",placement:"bottom",children:e.jsx(ne,{sx:{color:(c=ae)==null?void 0:c.palette.primary.main},onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.EXPLORE})),u.preventDefault(),u.stopPropagation()},children:e.jsx(bn,{})})})]})]})}),Ma=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),La=d.memo(({dbs:s,search:t})=>{const r=H();a.debug(s,t);const n=k(m=>wt(m,s));a.debug("tablesLoaded",n);const i=k(m=>_t(m,s));a.debug("tables",i);const o=k(m=>Et(m,s));a.debug("tableContext",o);const[g,x]=d.useState("");return d.useEffect(()=>{n||ln(s,function(m){const y=m==null?void 0:m.data;a.debug("response data",y),r(kt({dbs:s,tbl:y,context:m.context??void 0}))},m=>{a.error("error",m),x(m??R.contactSupport)})},[n]),g!==""?e.jsx(d.Suspense,{children:e.jsx(Ma,{severity:"error",message:g,close:!1})}):n?n&&i.length===0?e.jsx(l,{sx:{padding:"1rem"},children:e.jsx(Se,{children:"Database contains no tables"})}):e.jsxs(e.Fragment,{children:[...i.map(m=>{const y=!Fe(m,t);return e.jsx(te,{itemId:s+"-"+m,label:e.jsx(Ys,{dbs:s,tbl:m,typ:K.TABLE,tableContext:o}),sx:{visibility:y?"hidden":"inherit",position:y?"fixed !important":"inherit"},children:e.jsx(qs,{dbs:s,tbl:m,typ:K.TABLE})})})]}):e.jsx(de,{})}),Ra=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),Oa=({dbs:s,search:t})=>{const r=H();a.debug(s,t);const n=k(m=>Pt(m,s));a.debug(n);const[i,o]=d.useState("");d.useEffect(()=>{n||x()},[n]);const g=k(m=>At(m,s));a.debug(g);const x=()=>{cn(s,m=>{const y=m==null?void 0:m.data;a.debug("response data",y),r(Mt({dbs:s,vws:y}))},m=>{a.error("error",m),o(m??R.contactSupport)})};return i!==""?e.jsx(d.Suspense,{children:e.jsx(Ra,{severity:"error",message:i,close:!1})}):n?n&&g.length===0?e.jsx(l,{sx:{padding:"1rem"},children:e.jsx(Se,{children:"Database contains no views"})}):e.jsxs(e.Fragment,{children:[...g.map(m=>{const y=!Fe(m,t);return e.jsx(te,{itemId:s+"-"+m,label:e.jsx(Ys,{dbs:s,tbl:m,typ:K.VIEW}),sx:{visibility:y?"hidden":"unset",position:y?"fixed !important":"inherit"},children:e.jsx(qs,{dbs:s,tbl:m,typ:K.VIEW})})})]}):e.jsx(de,{})},Da=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),za=({dbs:s,search:t})=>{a.debug(s,t);const r=H(),n=k(c=>Lt(c,s));a.debug(n);const i=k(c=>Rt(c,s));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{dn(s,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(Ot({dbs:s,prc:u}))},c=>{a.error("error",c),g(c??R.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:c})=>e.jsx("pre",{style:{padding:0,margin:0},children:c.getValue()})}],[]),y=_e({...ke,columns:m,data:i.filter(c=>Fe(c.routine_name,t)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Da,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Database contains no stored procedures"}):e.jsx(Ee,{table:y}):e.jsx(de,{})},Na=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),Fa=({dbs:s,search:t})=>{a.debug(s,t);const r=H(),n=k(c=>Dt(c,s));a.debug(n);const i=k(c=>zt(c,s));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{pn(s,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(Nt({dbs:s,fnc:u}))},c=>{a.error("error",c),g(c??R.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:c})=>e.jsx("pre",{style:{padding:0,margin:0},children:c.getValue()})}],[]),y=_e({...ke,columns:m,data:i.filter(c=>Fe(c.routine_name,t)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Na,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Database contains no functions"}):e.jsx(Ee,{table:y}):e.jsx(de,{})};var $=(s=>(s.WP="wp",s.LOCAL="local",s.REMOTE="remote",s.SYSTEM="system",s))($||{});const Ba=({setShowFilter:s})=>{const t=H(),r=k(i=>ks(i));a.debug(r);const n=k(i=>gs(i));return a.debug(n),d.useEffect(()=>{localStorage.setItem("ppExplorerSearchDbsTypes",JSON.stringify(r))},[r]),e.jsxs(ps,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[e.jsx(sa,{title:"Database filter",sx:{textAlign:"center"}}),e.jsx(us,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:e.jsxs(l,{sx:{display:"inline-grid",textAlign:"left","& label":{display:"flex",alignItems:"center"}},children:[e.jsx(Y,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.WP),onChange:(i,o)=>{t(o?$e({dbsType:$.WP}):He({dbsType:$.WP}))}}),"WordPress database"]})}),e.jsx(Y,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.LOCAL),onChange:(i,o)=>{t(o?$e({dbsType:$.LOCAL}):He({dbsType:$.LOCAL}))}}),"Local databases"]})}),e.jsx(Y,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.REMOTE),onChange:(i,o)=>{t(o?$e({dbsType:$.REMOTE}):He({dbsType:$.REMOTE}))}}),"Remote databases"]})}),e.jsx(Y,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.SYSTEM),onChange:(i,o)=>{t(o?$e({dbsType:$.SYSTEM}):He({dbsType:$.SYSTEM}))}}),"System databases"]})})]})}),e.jsxs(na,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(l,{}),e.jsx(G,{variant:"contained",onClick:()=>s(!1),children:"OK"})]})]})},be=({search:s,setSearch:t,addFilter:r})=>{a.debug(s,r);const[n,i]=d.useState(!1);return e.jsxs(l,{sx:{position:"relative"},children:[e.jsx(re,{value:s,type:"search",onChange:o=>{t(o.target.value)},onClick:o=>{o.stopPropagation()},onKeyDown:o=>{o.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(ws,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(yn,{})}),endAdornment:e.jsx(e.Fragment,{children:r&&e.jsx(ws,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(ne,{onClick:()=>{i(!n)},children:e.jsx(Tn,{})})})})}}),n&&e.jsx(Ba,{setShowFilter:i})]})},Va=(s,t)=>{const r=k(n=>Ft(n,s,t));return a.debug("allTablesSelected",r),r},Wa=(s,t)=>{const r=k(n=>Bt(n,s,t));return a.debug("allViewsSelected",r),r},Re=s=>{const[t,r]=d.useState(localStorage.getItem(s)??""),n=i=>{r(i),localStorage.setItem(s,i)};return a.debug(t),{search:t,setSearch:n}},Ka=d.memo(({dbs:s})=>{a.debug(s);const t=H(),[r,n]=d.useState(!1),{search:i,setSearch:o}=Re(`ppExplorerSearchTables-${s}`);a.debug(r,i);const[g,x]=d.useState(!1),{search:m,setSearch:y}=Re(`ppExplorerSearchViews-${s}`);a.debug(g,m);const[c,u]=d.useState(!1),{search:S,setSearch:j}=Re(`ppExplorerSearchProcedures-${s}`);a.debug(c,S);const[T,v]=d.useState(!1),{search:I,setSearch:M}=Re(`ppExplorerSearchFunctions-${s}`);a.debug(T,I);const N=Va(s,i),D=Wa(s,m),[L,F]=d.useState("");return a.debug(L),e.jsxs(e.Fragment,{children:[e.jsx(te,{itemId:s+"-tables",className:"pp-data-exporer-table-tree-item "+L,onClickCapture:P=>{var E,B;!(P.target instanceof HTMLInputElement)&&!(P.target instanceof HTMLAnchorElement)&&!((E=P.target.closest("span"))!=null&&E.classList.contains("pp-select-all-tables"))&&((B=P.target.closest("li"))!=null&&B.classList.contains("pp-data-exporer-table-tree-item"))&&(F(L===""?"hide-details":""),r?P.stopPropagation():(n(!0),F("")))},sx:{padding:0,minWidth:0,"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:r&&L===""?0:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[r&&L===""?e.jsx(pe,{size:"small",className:"pp-select-all-tables",checked:N,onClick:P=>{t(Ps({dbs:s,isSelected:!N,search:i})),P.stopPropagation()},sx:{marginLeft:"-12px"}}):e.jsx(Ks,{}),"Tables"]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:P=>{t(De({dbs:s})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:r&&L===""&&e.jsx(be,{search:i,setSearch:o})})]}),children:e.jsx(La,{dbs:s,search:i})}),e.jsx(te,{itemId:s+"-views",onClick:()=>{x(!g)},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:g?0:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[g?e.jsx(pe,{size:"small",checked:D,onClick:P=>{t(As({dbs:s,isSelected:!D,search:m})),P.stopPropagation()},sx:{marginLeft:"-12px"}}):e.jsx(Gs,{}),"Views"]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:P=>{t(Ze({dbs:s})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:g&&e.jsx(be,{search:m,setSearch:y})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Oa,{dbs:s,search:m})}),e.jsx(te,{itemId:s+"-procedures",onClick:()=>{u(!c)},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[e.jsx(Ws,{}),"Stored Procedures"]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:P=>{t(Vt({dbs:s})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:c&&e.jsx(be,{search:S,setSearch:j})})]}),sx:{padding:0,minWidth:0},children:e.jsx(za,{dbs:s,search:S})}),e.jsx(te,{itemId:s+"-functions",onClick:()=>{v(!T)},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[e.jsx(Nn,{}),"Functions"]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:P=>{t(Wt({dbs:s})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:T&&e.jsx(be,{search:I,setSearch:M})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Fa,{dbs:s,search:I})})]})}),Ga=()=>{const s=k(t=>Kt(t));return a.debug("countSelectedTables",s),s},$a=()=>{const s=k(t=>Gt(t));return a.debug("hasBulkActions",s),s},Ha=()=>{const s=k(t=>$t(t));return a.debug("countSelectedViews",s),s};function Ua(s){const t=d.useRef(null);return e.jsx(Un,{nodeRef:t,handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:e.jsx(ds,{ref:t,...s})})}const xs=s=>{const{title:t,message:r,open:n,setOpen:i,onConfirm:o}=s;return e.jsxs(aa,{open:n,onClose:()=>i(!1),PaperComponent:Ua,"aria-labelledby":"confirm-dialog",children:[e.jsx($n,{style:{marginTop:"10px",cursor:"move"},id:"draggable-dialog-title",children:t}),e.jsx(ra,{children:e.jsx(Hn,{component:"div",children:r})}),e.jsx(ia,{sx:{marginRight:"15px",marginBottom:"15px"},children:e.jsx(G,{variant:"contained",onClick:()=>{i(!1),o!==void 0&&o()},children:"OK"})})]})},Qs=()=>{const s=k(t=>Ht(t));return a.debug("context",s),s},qa=(s,t,r,n,i,o=!1)=>{a.debug(s,t,r),Be(we.appUrlActionRename,{dbs:s,from_tbl:t,to_tbl:r},n,i,o)},Ya=(s,t,r,n,i,o,g,x=!1)=>{a.debug(s,t,r,n,i),Be(we.appUrlActionCopy,{from_dbs:s,to_dbs:t,from_tbl:r,to_tbl:n,copy_data:i},o,g,x)},Xs=(s,t,r,n,i=!1)=>{a.debug(s,t),Be(we.appUrlActionTruncate,{dbs:s,tbl:t},r,n,i)},Js=(s,t,r,n,i,o=!1)=>{a.debug(s,t,r),Be(we.appUrlActionDrop,{dbs:s,tbl:t,typ:r},n,i,o)},Qa=(s,t,r,n,i=!1)=>{a.debug(s);const o=new FormData;o.append("dbs",s),Object.keys(t).map(g=>{o.append("file"+g,t[g])}),Be(we.appUrlActionImport,o,r,n,i)},Me={export:"Export table(s)",truncate:"Truncate table(s)",drop:"Drop table(s)/view(s)"},Xa=()=>{const s=H(),t=$a(),r=Ga(),n=Ha(),i=Qs(),[o,g]=d.useState({}),[x,m]=d.useState("*"),[y,c]=d.useState(null),[u,S]=d.useState(!1),[j,T]=d.useState(!1),[v,I]=d.useState(!1);d.useEffect(()=>{r===0&&(x==="export"||x==="truncate")&&m("*")},[r]);const M={vertical:"top",horizontal:"right"},N=()=>{const b=Ms(cs.getState()),h={};return b==null?{}:(Object.keys(b).map(f=>{b[f].tablesSelected.map(C=>{h[f]===void 0&&(h[f]={}),h[f][C]={status:null,typ:K.TABLE}}),x==="drop"&&b[f].viewsSelected.map(C=>{h[f]===void 0&&(h[f]={}),h[f][C]={status:null,typ:K.VIEW}})}),h)},D=(b,h,f)=>{const C={...o};h==="*"?Object.keys(C[b]).map(_=>C[b][_].status=f):C[b][h].status=f,g(C)},L=()=>{Object.keys(o).length>0&&Object.keys(o).map(b=>{window.document.getElementById(`pp-export-tables-${b}`).submit(),D(b,"*",!0)})},F=()=>{Object.keys(o).length>0&&Object.keys(o).map(b=>{Object.keys(o[b]).map(h=>{Xs(b,h,f=>{a.debug(f),(f==null?void 0:f.code)==="ok"&&(f==null?void 0:f.message)!==void 0?D(b,h,!0):D(b,h,!1)},f=>{a.error("error",b,h,f),D(b,h,!1)})})})},P=()=>{Object.keys(o).length>0&&Object.keys(o).map(b=>{Object.keys(o[b]).map(h=>{Js(b,h,o[b][h].typ,f=>{a.debug(f),(f==null?void 0:f.code)==="ok"&&(f==null?void 0:f.message)!==void 0?D(b,h,!0):D(b,h,!1)},f=>{a.error("error",f),D(b,h,!1)})})})},E=b=>e.jsxs(Fs,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(Bs,{children:e.jsxs(ss,{children:[e.jsx(ee,{children:"Database"}),e.jsx(ee,{children:"Table | View"}),e.jsx(ee,{children:"Status"})]})}),e.jsx(Vs,{children:Object.keys(b).map(h=>Object.keys(b[h]).map((f,C)=>{var _,w;return e.jsxs(ss,{children:[e.jsx(ee,{children:C===0?h:null}),e.jsx(ee,{children:f}),e.jsxs(ee,{children:[b[h][f]===null&&e.jsx(Cn,{style:{display:"block",margin:"0 auto"}}),b[h][f].status===!0&&e.jsx(Rs,{color:(_=ae)==null?void 0:_.palette.success.main,style:{display:"block",margin:"0 auto"}}),b[h][f].status===!1&&e.jsx(Os,{color:(w=ae)==null?void 0:w.palette.error.main,style:{display:"block",margin:"0 auto"}})]})]},C)}))})]}),B=()=>e.jsx(l,{children:E(o)}),O=()=>{const b=N();return g(b),e.jsxs(l,{children:[E(b),(x==="truncate"||x==="drop")&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{style:{marginTop:"20px"}}),e.jsx(l,{sx:{marginTop:"20px",marginBottom:"20px"},children:x==="drop"?e.jsx("span",{children:"Deletes views and tables with all data permanently."}):e.jsx("span",{children:"Deletes all data permanently."})}),e.jsx(l,{children:e.jsx("strong",{children:"This actions cannot be undone!"})}),e.jsxs(l,{children:["'",e.jsx("strong",{children:"NO"}),"' to stop, '",e.jsx("strong",{children:"YES"}),"' to continue."]}),e.jsxs(l,{sx:{marginTop:"20px",fontSize:"80%",display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[e.jsx(Sn,{}),e.jsxs("span",{children:["Does not ",x," WordPress tables"]})]})]})]})};return t?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"pp-bulk-actions-container",color:"inherit",position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(rs,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Y,{variant:"standard",sx:{minWidth:200},children:e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},value:x,onChange:b=>{m(b.target.value)},children:[e.jsx(W,{value:"*",children:"Bulk actions"}),e.jsx(W,{value:"export",disabled:r===0,children:Me.export}),e.jsx(W,{value:"truncate",disabled:r===0,children:Me.truncate}),e.jsx(W,{value:"drop",children:Me.drop})]})}),e.jsx(G,{variant:"contained",onClick:()=>{x!=="*"?(c(O()),S(!0)):T(!0)},children:"Apply"})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsx(Ss,{badgeContent:r,color:"info",anchorOrigin:M,children:e.jsx(Ks,{color:"action",size:20})}),e.jsx(Ss,{badgeContent:n,color:"info",anchorOrigin:M,children:e.jsx(Gs,{color:"action",size:20})})]})]})}),x==="export"&&Object.keys(o).map(b=>e.jsxs("form",{id:"pp-export-tables-"+b,action:i.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:b}),Object.keys(o[b]).map(h=>e.jsx("input",{type:"hidden",name:"table_names[]",value:h},h)),e.jsx("input",{type:"hidden",name:"_wpnonce",value:i.wp.nonce.split("-")[0]})]},"pp-export-tables-"+b)),e.jsx(xs,{title:"Apply bulk action",message:"No bulk action selected",open:j,setOpen:T}),e.jsx(xe,{title:Me[x],message:y,open:u,setOpen:S,onConfirm:()=>{switch(I(!0),x){case"export":L();break;case"truncate":F();break;case"drop":P()}}}),e.jsx(xs,{title:Me[x],message:B(),open:v,setOpen:I,onConfirm:()=>{Object.keys(o).map(b=>{s(De({dbs:b})),s(Ps({dbs:b,isSelected:!1,search:""})),s(Ze({dbs:b})),s(As({dbs:b,isSelected:!1,search:""}))})}})]}):null},fs=()=>{const s=k(t=>Ms(t));return a.debug(s),s},Ja=({setCanImport:s})=>{var B,O,b;const t=Qs(),r=fs(),[n,i]=d.useState(""),[o,g]=d.useState("");d.useEffect(()=>{if(r!=null&&Object.keys(r).length>0){const h=Object.keys(r).filter(f=>r[f].dbsType===$.WP);(h==null?void 0:h.length)>0&&i(h[0])}},[r]);const x=d.useRef(null),[m,y]=d.useState(null),c=(B=t==null?void 0:t.wp)!=null&&B.zip?".sql,.zip":".sql",u=(O=t==null?void 0:t.wp)!=null&&O.zip?"SQL and ZIP":"SQL",S=(b=t==null?void 0:t.wp)==null?void 0:b.upload,[j,T]=d.useState(!1),[v,I]=d.useState(null),[M,N]=d.useState(!1),[D,L]=d.useState(""),[F,P]=d.useState(null),E=h=>e.jsx(e.Fragment,{children:e.jsxs(Fs,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(Bs,{children:e.jsxs(ss,{children:[e.jsx(ee,{children:"Import file"}),e.jsx(ee,{children:"Message"}),e.jsx(ee,{children:"Status"})]})}),e.jsx(Vs,{children:h.map(f=>Object.keys(f).map(C=>{var _,w;return e.jsxs(ss,{children:[e.jsx(ee,{sx:{verticalAlign:"text-top"},children:C}),e.jsxs(ee,{sx:{verticalAlign:"text-top"},children:[f[C].msg,f[C].errors.map(U=>{var z;return e.jsx("ul",{style:{listStyle:"disc",padding:"0 40px"},children:e.jsx("li",{style:{color:(z=ae)==null?void 0:z.palette.error.main},children:U})})})]}),e.jsx(ee,{sx:{verticalAlign:"text-top"},children:f[C].status==="error"?e.jsx(Os,{color:(_=ae)==null?void 0:_.palette.error.main,style:{display:"block",margin:"0 auto"}}):e.jsx(Rs,{color:(w=ae)==null?void 0:w.palette.success.main,style:{display:"block",margin:"0 auto"}})})]},C)}))})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"pp-import-container",sx:{position:"relative","& > .tooltip":{position:"absolute",top:"10px",right:"10px",zIndex:999}},children:[e.jsx(Je,{title:"Close",position:"bottom",children:e.jsx(ne,{onClick:()=>{x.current&&(x.current.value=""),g(""),s(!1)},size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Ds,{})})}),e.jsx(as,{className:"pp-import-container",color:"inherit",position:"relative",elevation:4,sx:{display:"grid",alignItems:"center",margin:"0 0 5px 0"},children:e.jsxs(rs,{sx:{display:"grid",gap:"10px",alignItems:"center",height:"max-content",paddingTop:"50px",paddingBottom:"30px"},children:[e.jsx(e.Fragment,{children:e.jsxs(l,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"start",alignItems:"center",gap:"15px"},children:[e.jsx(l,{children:e.jsxs(Y,{sx:{minWidth:"300px"},children:[e.jsx(ts,{variant:"outlined",children:"Select destination database"}),e.jsx(Te,{MenuProps:{id:"pp-select-menu"},label:"Select destination database",value:n,onChange:h=>{i(h.target.value)},children:r!=null&&Object.keys(r).map(h=>{const f=r[h].dbsType===$.WP?h+" (WordPress database)":h;return e.jsx(W,{value:h,children:f},h)})})]})}),e.jsx(l,{children:e.jsx("form",{children:e.jsxs(G,{component:"label",variant:"outlined",startIcon:e.jsx(vn,{}),children:["Select file(s)",e.jsx(re,{type:"file",inputProps:{accept:c,multiple:!0},onChange:h=>{const f=h.target.files;y(f);const C=Object.keys(f).map(_=>f[_].name).toString();g(C)},InputProps:{inputRef:x},sx:{display:"none"}})]})})}),o!==""&&e.jsx(e.Fragment,{children:e.jsx(l,{children:e.jsx(G,{component:"label",variant:"contained",startIcon:e.jsx(In,{}),onClick:()=>{I(e.jsxs(l,{children:[e.jsxs(l,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Selected file(s): ",e.jsx("strong",{children:o})]}),e.jsxs(l,{children:["Selected database: ",e.jsx("strong",{children:n})]}),e.jsxs(l,{sx:{marginTop:"20px",fontSize:"80%"},children:[e.jsx("strong",{children:"NOTE"}),"Â  You can work on other tasks while your import is performed in the background."]})]})),T(!0)},children:"Import file(s)"})})})]})}),o!==""&&e.jsxs(l,{sx:{marginTop:"20px",marginBottom:"10px",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",fontWeight:"bold"},children:["Selected file(s): ",o]}),e.jsxs("fieldset",{className:"pp-fieldset",style:{marginTop:"5px",padding:"10px 30px",minWidth:0},children:[e.jsx("legend",{children:"IMPORTANT"}),e.jsxs("ul",{style:{paddingLeft:"15px",listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Supports multiple file uploads simultaneously."}),e.jsxs("li",{children:["Server supports ",u," file types."]}),e.jsxs("li",{children:["Maximum supported file size on this server is ",S,"."]}),e.jsx("li",{children:"Add a ; and a new line character at the end of every SQL statement."})]})]})]})})]}),e.jsx(xe,{title:"Import selected file(s)?",message:v,open:j,setOpen:T,onConfirm:()=>{Qa(n,m,h=>{var f;if(h!=null&&h.message&&((f=h==null?void 0:h.context)!=null&&f.imported)&&Array.isArray(h.context.imported)){const C=h.context.imported;N(!0),L(h.message),P(E(C))}else A(R.contactSupport,{variant:"error"})},h=>{a.error("error",h),A(R.contactSupport,{variant:"error"})})}}),e.jsx(xs,{title:D,message:F,open:M,setOpen:N,onConfirm:()=>{g(""),s(!1)}})]})};const Es=d.lazy(()=>ie(()=>import("./Alert-1.0.15-5097a608.js"),["./Alert-1.0.15-5097a608.js","./main-1.0.15.js","./index.esm-1.0.15-bb4db28d.js","./iconBase-1.0.15-5866dbfd.js","./AlertTitle-1.0.15-cc3002eb.js","./Close-1.0.15-8d33e66c.js","./useSlot-1.0.15-4f7bfdbc.js"],import.meta.url)),Za=()=>{var P;const s=H(),t=d.useRef(null),{search:r,setSearch:n}=Re("ppExplorerSearch"),i=fs(),o=k(E=>Ut(E));a.debug(o);const g=k(E=>ms(E));a.debug(g);const x=k(E=>ks(E));a.debug(x);const[m,y]=d.useState("");d.useEffect(()=>{window.ppActionEnableImport=(E=!0)=>{I(E)},c()},[]);const c=()=>{let E=[];const B=localStorage.getItem("ppExplorerSearchDbsTypes");B!=null&&B!==""?E=JSON.parse(B):E=[$.WP,$.LOCAL,$.REMOTE],un(O=>{const b=O==null?void 0:O.data;a.debug("response data",b);const h=[],f={};b.map(w=>{h.push({dbs:w.dbs,dbsType:w.dbs_type,pdsDbs:w.pds}),f[w.dbs]=!1}),S(f),h.sort((w,U)=>{var z,X,q,oe;return((z=w==null?void 0:w.dbs)==null?void 0:z.toLocaleLowerCase())>((X=U==null?void 0:U.dbs)==null?void 0:X.toLocaleLowerCase())?1:((q=U==null?void 0:U.dbs)==null?void 0:q.toLocaleLowerCase())>((oe=w==null?void 0:w.dbs)==null?void 0:oe.toLocaleLowerCase())?-1:0}),a.debug(h),s(qt({dbs:h,dbsTypes:E}));const C={};b.map(w=>{C[w.dbs]=w.dbs_type}),s(Yt({dbs:C}));const _=O.context;a.debug("context",_),s(Qt({context:_}))},O=>{a.error("error",O),y(O??R.contactSupport)})},[u,S]=d.useState({}),[j,T]=d.useState(!0),[v,I]=d.useState(!1),M=()=>e.jsx(je,{title:"Import data or execute scripts",children:e.jsx(ne,{sx:{color:"inherit"},onClick:()=>{I(!v)},children:e.jsx(_n,{})})}),N=()=>e.jsx(ne,{onClick:()=>{F(L==="large"?"medium":L==="medium"?"small":"large")},sx:{color:"#fff"},children:L==="small"?e.jsx(En,{}):L==="medium"?e.jsx(kn,{}):e.jsx(Pn,{})}),D=localStorage.getItem("ppDataExplorerDensity"),[L,F]=d.useState(D==="large"||D==="medium"?D:"small");return d.useEffect(()=>{localStorage.setItem("ppDataExplorerDensity",L)},[L]),m!==""?e.jsx(d.Suspense,{children:e.jsx(Es,{severity:"error",message:m,close:!1})}):e.jsxs(l,{className:"pp-sub-container-explorer",sx:{width:"100%"},children:[e.jsx(as,{className:"pp-explorer-header",elevation:4,position:"relative",sx:{margin:"0 0 5px 0"},children:e.jsx(rs,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"0 !important"},children:((P=we.appOrig)==null?void 0:P.appTarget)==="backend"?e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto auto",justifyContent:"end",alignItems:"center",gridGap:"10px"},children:[N(),e.jsx(l,{sx:{textAlign:"right"},children:"Search & Filter"}),e.jsx(be,{search:r,setSearch:n,addFilter:!0})]}):e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto 1fr",justifyContent:"space-between",alignItems:"center",gridGap:"10px"},children:[e.jsx(l,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Data Explorer"}),e.jsx(l,{children:M()}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"end",alignItems:"center",gap:"10px"},children:[N(),e.jsx(be,{search:r,setSearch:n,addFilter:!0})]})]})})}),e.jsx(Xa,{}),v&&e.jsx(Ja,{setCanImport:I}),i==null?e.jsx(l,{sx:{padding:"30px"},children:e.jsx(hs,{title:"Loading..."})}):e.jsxs(e.Fragment,{children:[o!==""&&e.jsx(ds,{sx:{marginBottom:"5px"},elevation:4,children:e.jsx(d.Suspense,{children:e.jsx(Es,{severity:"error",message:o,close:!0,setClose:()=>{s(Ls({error:""}))}})})}),e.jsx(ds,{className:"pp-data-exporer",elevation:4,children:e.jsx(Kn,{className:"pp-data-exporer-database-tree pp-density-"+L,"aria-label":"Data Explorer",sx:{display:"grid",gridGap:"0","& li.MuiTreeItem-root:first-of-type li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:0,borderTopRightRadius:0}},children:Object.keys(i).map(E=>{var O;if(x.includes(g[E])===!1||r!==""&&!Fe(E,r))return null;const B=((O=g[E])==null?void 0:O.toLocaleLowerCase())==="wp"?E+" (WordPress database)":E;return e.jsx(te,{ref:t,slots:{expandIcon:ce,collapseIcon:j?ce:wn},itemId:E,className:"pp-data-exporer-database-tree-item hide-details",onClickCapture:b=>{var h,f,C,_;if((h=b.target.closest("li"))!=null&&h.classList.contains("pp-data-exporer-database-tree-item"))if((f=b.target.closest("li"))!=null&&f.classList.contains("hide-details")?((C=b.target.closest("li"))==null||C.classList.remove("hide-details"),T(!1)):((_=b.target.closest("li"))==null||_.classList.add("hide-details"),T(!0)),u[E])b.stopPropagation();else{const w=u;w[E]=!0,S(w)}},sx:{padding:"0","&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[e.jsx(Dn,{}),B]}),children:e.jsx(Ka,{dbs:E})},E)})})})]})]})},er=()=>{const s=k(t=>gs(t));return a.debug(s),e.jsx(e.Fragment,{children:s!==void 0&&s.action===ue.EXPLORE&&e.jsx(oa,{appId:An(),dbs:s.dbs,tbl:s.tbl,exploring:!0})})},sr=({dbs:s,tbl:t})=>{a.debug(s,t);const[r,n]=d.useState(!1),[i,o]=d.useState(void 0),g=()=>{switch(i){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{disableGutters:!0,children:[e.jsx(Ie,{expandIcon:e.jsx(ce,{}),children:"Reset"}),e.jsx(Ce,{children:e.jsxs(Y,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{o(ls.TABLE),n(!0)},children:"Reset Table Builder"}),e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{o(ls.FORM),n(!0)},children:"Reset Form Builder"}),e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{o(ls.THEME),n(!0)},children:"Reset Theme"}),e.jsxs(ge,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},error:!0,children:[e.jsx(zs,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(xe,{title:g(),message:"Are you sure? This action cannot be undone!",open:r,setOpen:n,onConfirm:()=>{i!==void 0&&qn(la.GLOBAL,i,s,t,null,null,x=>{if(x!=null&&x.code&&(x==null?void 0:x.message)!==void 0)switch(x.code){case"ok":A(x.message,{variant:"success"});break;case"info":A(x.message,{variant:"info"});break;default:A(x.message??R.contactSupport,{variant:"error"})}else a.error(x),A(R.contactSupport,{variant:"error"})},x=>{a.error("error",x),A(x??R.contactSupport,{variant:"error"})})}})]})},tr=({dbs:s,tbl:t,setIsUpdated:r})=>{a.debug(s,t);const n=H(),i=k(g=>ye(g));a.debug(i);const o=g=>{const x={...i,table_settings:{...i.table_settings,hyperlink_definition:g}};n(Xe({settings:x})),r(!0)};return e.jsxs(ve,{disableGutters:!0,children:[e.jsx(Ie,{expandIcon:e.jsx(ce,{}),children:"Table Settings"}),e.jsx(Ce,{children:e.jsxs(Y,{children:[e.jsx(se,{children:"Process hyperlink columns as"}),e.jsxs(Hs,{sx:{marginTop:"10px",marginBottom:"10px"},children:[e.jsxs(se,{className:"align-label-radio",children:[e.jsx(ns,{checked:i.table_settings.hyperlink_definition==="json",onChange:g=>{o("json"),g.stopPropagation()}}),"Preformatted JSON"]}),e.jsxs(se,{children:[e.jsx(ns,{checked:i.table_settings.hyperlink_definition==="text",onChange:g=>{o("text"),g.stopPropagation()}}),"Plain text"]})]}),e.jsx(ge,{children:"Preformatted JSON supports individual label and target settings. Plain text converts column content to a hyperlink link."})]})})]})},nr=({dbs:s,tbl:t,setIsUpdated:r})=>{var u;a.debug(s,t);const n=H(),i=k(S=>Xt(S));a.debug(i);const o=k(S=>ye(S));a.debug(o);const[g,x]=d.useState(""),m=(S,j)=>{const T={...o,list_labels:{...o.list_labels,[S]:j}};n(Xe({settings:T})),r(!0)},y=(S,j)=>{const T={...o,form_labels:{...o.form_labels,[S]:j}};n(Xe({settings:T})),r(!0)},c=(S,j)=>{const T={...o,column_media:{...o.column_media,[S]:j}};n(Xe({settings:T})),r(!0)};return e.jsxs(ve,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Ie,{expandIcon:e.jsx(ce,{}),children:"Column Settings"}),e.jsx(Ce,{children:e.jsxs(Y,{fullWidth:!0,children:[e.jsx(l,{sx:{display:"grid",gridGap:"10px",marginBottom:"20px"},children:e.jsxs(l,{children:[...(u=i==null?void 0:i.columns)==null?void 0:u.map((S,j)=>{const T=S.column_name;return e.jsxs(ve,{expanded:g===T,onChange:()=>{x(g===T?"":T)},sx:{"&.MuiPaper-root.MuiPaper-elevation.Mui-expanded":{margin:0}},children:[e.jsx(Ie,{expandIcon:e.jsx(ce,{}),children:S.column_name}),e.jsxs(Ce,{sx:{display:"grid",gridGap:"10px"},children:[e.jsx(re,{label:"Table label",value:o.list_labels[T],variant:"outlined",onChange:v=>{m(T,v.target.value)}}),e.jsx(re,{label:"Form label",value:o.form_labels[T],variant:"outlined",onChange:v=>{y(T,v.target.value)}}),e.jsxs(Y,{children:[e.jsx(ts,{id:"media_type_label"+j,variant:"outlined",children:"Media type"}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},labelId:"media_type_label"+j,id:"media_type"+j,label:"Media type",value:o.column_media[T]??"",variant:"outlined",onChange:v=>{c(T,v.target.value),v.stopPropagation()},children:[e.jsx(W,{value:"",children:"Â "},""),e.jsx(W,{value:"Attachment",children:"Attachment"},"Attachment"),e.jsx(W,{value:"Audio",children:"Audio"},"Audio"),e.jsx(W,{value:"Hyperlink",children:"Hyperlink"},"Hyperlink"),e.jsx(W,{value:"Image",children:"Image"},"Image"),e.jsx(W,{value:"ImageURL",children:"ImageURL"},"ImageURL"),e.jsx(W,{value:"Video",children:"Video"},"Video")]})]})]})]})})]})}),e.jsx(ge,{children:"Default column labels and column media types"})]})})]})};var Q=(s=>(s.SELECT="select",s.INSERT="insert",s.UPDATE="update",s.DELETE="delete",s))(Q||{}),Oe=(s=>(s.GET="GET",s.POST="POST",s))(Oe||{});const Qe=({restApi:s,action:t,roles:r,users:n,setRestApi:i,expanded:o,setExpanded:g})=>{a.debug(s,t,r,n,o);const x=(j,T)=>{const v=ca(s);if(T)v.methods.push(j);else{const I=v.methods.indexOf(j);I>-1&&v.methods.splice(I,1)}a.debug(j,T,v),i(v)},m=j=>{a.debug(j),i({...s,authorization:j})},y=j=>{a.debug(j),i({...s,authorized_roles:j.map(T=>T.key)})},c=j=>{a.debug(j),i({...s,authorized_users:j.map(T=>T.key)})},u=d.useMemo(()=>r.filter(j=>s.authorized_roles.includes(j.key)),[s.authorized_roles,r]),S=d.useMemo(()=>n.filter(j=>s.authorized_users.includes(j.key)),[s.authorized_users,n]);return e.jsxs(ve,{disableGutters:!0,expanded:o===t.toString(),onChange:()=>{o===t.toString()?g(""):g(t)},children:[e.jsx(Ie,{expandIcon:e.jsx(ce,{}),sx:{textTransform:"capitalize"},children:t}),e.jsx(Ce,{children:e.jsxs(l,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(se,{children:"Supported HTTP methods"}),e.jsxs(l,{children:[e.jsx(Ne,{control:e.jsx(ze,{checked:s.methods.includes(Oe.GET),onChange:(j,T)=>{x(Oe.GET,T),j.stopPropagation()}}),label:"GET",labelPlacement:"end"}),e.jsx(Ne,{control:e.jsx(ze,{checked:s.methods.includes(Oe.POST),onChange:(j,T)=>{x(Oe.POST,T),j.stopPropagation()}}),label:"POST",labelPlacement:"end"})]}),e.jsx(se,{children:"Authorization"}),e.jsxs(Y,{sx:{marginLeft:"-10px"},children:[e.jsxs(Hs,{children:[e.jsxs(se,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(ns,{checked:s.authorization===Ae.AUTHORIZED,onChange:j=>{m(Ae.AUTHORIZED),j.stopPropagation()}}),"Authorized access only"]}),e.jsxs(l,{sx:{display:"grid",gridGap:"10px",margin:"20px 10px 20px 42px"},children:[e.jsx(vs,{multiple:!0,disableCloseOnSelect:!0,options:r,getOptionLabel:j=>j.value,value:u,onChange:(j,T)=>{y(T)},renderInput:j=>e.jsx(re,{...j,label:"Roles"}),renderTags:(j,T)=>j.map((v,I)=>{const{key:M,...N}=T({index:I});return e.jsx(Is,{variant:"outlined",label:v.value,...N},M)})}),e.jsx(vs,{multiple:!0,disableCloseOnSelect:!0,options:n,getOptionLabel:j=>j.value,value:S,onChange:(j,T)=>{c(T)},renderInput:j=>e.jsx(re,{...j,label:"Users"}),renderTags:(j,T)=>j.map((v,I)=>{const{key:M,...N}=T({index:I});return e.jsx(Is,{variant:"outlined",label:v.value,...N},M)})})]}),e.jsxs(se,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(ns,{checked:s.authorization===Ae.ANONYMOUS,onChange:j=>{m(Ae.ANONYMOUS),j.stopPropagation()}}),"Anonymous access"]})]}),s.authorization===Ae.ANONYMOUS&&s.methods.length>0&&e.jsxs(l,{sx:{marginTop:"10px",marginLeft:"10px"},children:[(t===Q.INSERT||t===Q.UPDATE||t===Q.DELETE)&&e.jsx(ge,{children:"This setting allows non-authorized users to modify this table"}),t===Q.SELECT&&e.jsx(ge,{children:"This setting allows non-authorized users to query this table"})]})]})]})})]})},ar=({dbs:s,tbl:t,typ:r,metaData:n,setIsUpdated:i})=>{var S,j,T,v;a.debug(s,t,r,n);const o=H(),g=k(I=>ye(I));a.debug(g);const x=k(I=>ms(I));a.debug(x);const[m,y]=d.useState(""),c=[];if(((j=(S=n==null?void 0:n.settings)==null?void 0:S.wp)==null?void 0:j.roles)!==void 0)for(const I in n.settings.wp.roles)c.push({key:I,value:n.settings.wp.roles[I]});a.debug(c);const u=[];if(((v=(T=n==null?void 0:n.settings)==null?void 0:T.wp)==null?void 0:v.users)!==void 0)for(const I in n.settings.wp.users)u.push({key:I,value:n.settings.wp.users[I]});return a.debug(u),e.jsxs(ve,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Ie,{expandIcon:e.jsx(ce,{}),children:"REST API"}),e.jsx(Ce,{children:e.jsxs(l,{children:[e.jsx(Ne,{control:e.jsx(ze,{checked:g.rest_api!==null,onClick:I=>{g.rest_api!==null?o(Jt({})):o(Zt({})),i(!0),I.stopPropagation()}}),label:"Enable REST API",labelPlacement:"end"}),g.rest_api!==null&&e.jsxs(l,{sx:{marginTop:"20px"},children:[e.jsx(Qe,{restApi:g.rest_api.select,action:Q.SELECT,roles:c,users:u,setRestApi:I=>{const M={...g.rest_api};M[Q.SELECT]=I,o(Ue({rest_api:M})),i(!0)},expanded:m,setExpanded:y}),e.jsx(Qe,{restApi:g.rest_api.insert,action:Q.INSERT,roles:c,users:u,setRestApi:I=>{const M={...g.rest_api};M[Q.INSERT]=I,o(Ue({rest_api:M})),i(!0)},expanded:m,setExpanded:y}),e.jsx(Qe,{restApi:g.rest_api.update,action:Q.UPDATE,roles:c,users:u,setRestApi:I=>{const M={...g.rest_api};M[Q.UPDATE]=I,o(Ue({rest_api:M})),i(!0)},expanded:m,setExpanded:y}),e.jsx(Qe,{restApi:g.rest_api.delete,action:Q.DELETE,roles:c,users:u,setRestApi:I=>{const M={...g.rest_api};M[Q.DELETE]=I,o(Ue({rest_api:M})),i(!0)},expanded:m,setExpanded:y})]}),x[s]==="system"||x[s]==="wp"&&n.settings.wp.tables.includes(t)&&e.jsxs(ge,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",marginTop:"20px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(zs,{}),"We discourage enabling REST API services for WordPress and system tables"]})]})})]})},rr=({dbs:s,tbl:t,typ:r,metaData:n})=>{var z,X,q,oe,Ve,me,We,Ke;a.debug(s,t,r,n);const i=H(),[o,g]=d.useState("sql"),[x,m]=d.useState(!0),[y,c]=d.useState(""),[u,S]=d.useState(s),[j,T]=d.useState(""),[v,I]=d.useState(!0),[M,N]=d.useState(!1),[D,L]=d.useState(!1),[F,P]=d.useState(!1),[E,B]=d.useState(!1),O=fs();a.debug(O);const b=d.useMemo(()=>{const p=[];for(const J in O)p.push(J);return p},[O]);a.debug(b);const h=k(p=>ms(p));a.debug(h);const[f,C]=d.useState(O[s].pdsDbs===!0?((q=(X=(z=n==null?void 0:n.settings)==null?void 0:z.wp)==null?void 0:X.connect)==null?void 0:q.interval)??"":""),[_,w]=d.useState(O[s].pdsDbs===!0?((me=(Ve=(oe=n==null?void 0:n.settings)==null?void 0:oe.wp)==null?void 0:Ve.connect)==null?void 0:me.unit)??"":""),U=p=>{Mn.post(n.settings.wp.homea+"?action=wpda_pds_update_interval",p,{headers:{"Content-Type":"multipart/form-data"}}).then(J=>{a.error(p,J)}).catch(J=>{a.error("error",J)})};return e.jsxs(e.Fragment,{children:[e.jsxs(l,{sx:{margin:0,padding:0,"& .pp-action":{display:"grid",gridTemplateColumns:"150px 1fr",alignItems:"center",margin:0,padding:"30px",borderBottom:"1px solid #ddd"},"& .pp-action button":{width:"120px"}},children:[r===K.TABLE&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsxs("form",{action:n.settings.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:s}),e.jsx("input",{type:"hidden",name:"table_names",value:t}),e.jsx("input",{type:"hidden",name:"format_type",value:o}),e.jsx("input",{type:"hidden",name:"include_table_settings",value:o==="sql"&&x?"on":"off"}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.aonce.split("-")[0]}),e.jsx(G,{variant:"contained",type:"submit",children:"Export"})]})}),e.jsxs(l,{sx:{display:"grid"},children:[e.jsxs(Y,{children:[e.jsx(ts,{variant:"outlined",children:"Export to"}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},label:"Export to",value:o,onChange:p=>{g(p.target.value)},children:[e.jsx(W,{value:"sql",children:"SQL"},"sql"),e.jsx(W,{value:"csv",children:"CSV"},"csv"),e.jsx(W,{value:"json",children:"JSON"},"json"),e.jsx(W,{value:"excel",children:"Excel"},"excel"),e.jsx(W,{value:"xml",children:"XML"},"xml")]})]}),e.jsx(Ne,{sx:{visibility:o==="sql"?"visible":"hidden",height:o==="sql"?"auto":0,marginTop:o==="sql"?"10px":0,marginLeft:0},control:e.jsx(ze,{checked:x,onClick:p=>{m(!x),p.stopPropagation()}}),label:"With table settings",labelPlacement:"end"})]})]}),h[s]!=="system"&&(h[s]!=="wp"||!n.settings.wp.tables.includes(t))&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{t!==y&&y.trim()!==""?N(!0):A("Nothing to rename",{variant:"error"})},children:"Rename"})}),e.jsx(l,{children:e.jsx(re,{label:r===K.TABLE?"New table name":"New view name",value:y,onChange:p=>{c(p.target.value)},fullWidth:!0})})]}),r===K.TABLE&&e.jsxs(l,{className:"pp-action",children:[e.jsxs(l,{children:[e.jsx(G,{variant:"contained",onClick:()=>{j.trim()!==""?(B(!0),Ya(s,u,t,j,v,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":i(De({dbs:s})),A(p.message,{variant:"success"});break;case"info":A(p.message,{variant:"info"});break;default:a.error(p),A(p.message??R.contactSupport,{variant:"error"})}else a.error(p),A(R.contactSupport,{variant:"error"});B(!1)},p=>{a.error("error",p),A(p??R.contactSupport,{variant:"error"}),B(!1)})):A("Nothing to rename",{variant:"error"})},children:"Copy"}),e.jsx(Ne,{control:e.jsx(ze,{checked:v,onClick:p=>{I(!v),p.stopPropagation()}}),label:"Copy data",labelPlacement:"end",sx:{height:"56px"}}),e.jsx(l,{sx:{display:E?"block":"none","& > div":{marginRight:"30px"},"& span.MuiCircularProgress-root, svg":{height:"20px !important",width:"20px !important"}},children:e.jsx(hs,{title:"Copying..."})})]}),e.jsxs(l,{sx:{display:"grid",gridGap:"10px"},children:[e.jsxs(Y,{fullWidth:!0,children:[e.jsx(ts,{variant:"outlined",children:"To database"}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},label:"To database",value:u,onChange:p=>{S(p.target.value)},children:[...b.map(p=>e.jsx(W,{value:p,children:p},p))]})]}),e.jsx(re,{label:"To table name",value:j,onChange:p=>{T(p.target.value)},fullWidth:!0})]})]}),r===K.TABLE&&h[s]!=="system"&&(h[s]!=="wp"||!n.settings.wp.tables.includes(t))&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{L(!0)},children:"Truncate"})}),e.jsxs(l,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx("span",{children:"Deletes all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),h[s]!=="system"&&(h[s]!=="wp"||!n.settings.wp.tables.includes(t))&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{P(!0)},children:"Drop"})}),e.jsxs(l,{sx:{display:"grid",gridGap:"5px"},children:[r==K.VIEW?e.jsx("span",{children:"Deletes view permanently."}):e.jsx("span",{children:"Deletes table and all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),r===K.TABLE&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsxs("form",{method:"POST",action:n.settings.wp.home+"?page=wpda_designer",children:[e.jsx("input",{type:"hidden",name:"action",value:"edit"}),e.jsx("input",{type:"hidden",name:"action2",value:"init"}),e.jsx("input",{type:"hidden",name:"wpda_schema_name",value:s}),e.jsx("input",{type:"hidden",name:"wpda_schema_name_re",value:s}),e.jsx("input",{type:"hidden",name:"wpda_table_name",value:t}),e.jsx("input",{type:"hidden",name:"wpda_table_name_re",value:t}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.alter}),e.jsx("input",{type:"hidden",name:"page_number",value:"1"}),e.jsx("input",{type:"hidden",name:"caller",value:"dataexplorer"}),e.jsx(G,{variant:"contained",type:"submit",children:"ALTER"})]})}),e.jsx(l,{sx:{display:"grid",gridGap:"5px"},children:"Loads table into the Data Designer."})]}),O[s].pdsDbs===!0&&((Ke=(We=n==null?void 0:n.settings)==null?void 0:We.wp)==null?void 0:Ke.connect)!==!1&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{if(f!==""&&f>0&&_!==""){const p=new FormData;p.append("wpnonce",n.settings.wp.refresh),p.append("schema_name",s),p.append("table_name",t),p.append("interval",f.toString()),p.append("unit",_),U(p)}else A("Please enter valid scheduled update values",{variant:"error"})},children:"Refresh"})}),e.jsxs(l,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx(l,{children:"Next scheduled update"}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyContent:"start",alignItems:"center",gap:"5px"},children:[e.jsx(re,{type:"number",inputProps:{min:0},value:f,autoComplete:"off",onChange:p=>{const J=p.target.value.replaceAll("-","");C(J===""?"":Number(J))}}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},value:_,onChange:p=>{w(p.target.value)},children:[e.jsx(W,{value:""}),e.jsx(W,{value:"hour",children:"hour"}),e.jsx(W,{value:"day",children:"day"})]})]}),e.jsx(Y,{children:e.jsx(ge,{children:"Enter and press REFRESH to apply"})})]})]}),n.create!==""&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(ta,{text:n.create,onCopy:()=>{A("SQL was copied to your clipboard",{variant:"info"})},children:e.jsx(je,{title:"Copy SQL to clipboard",children:e.jsx(G,{variant:"contained",endIcon:e.jsx(da,{}),sx:{display:"flex",alignItems:"flex-start","& svg":{width:"50%"}},children:"SQL"})})})}),e.jsx(l,{sx:{display:"grid",gridGap:"5px"},children:e.jsx(l,{sx:{whiteSpace:"pre-wrap",fontSize:"70%"},children:n.create})})]})]}),e.jsx(xe,{title:`Rename ${r===K.VIEW?"view":"table"}?`,message:"This can affect existing apps using this table!",open:M,setOpen:N,onConfirm:()=>{qa(s,t,y,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":r===K.VIEW?i(Ze({dbs:s})):i(De({dbs:s})),i(es({})),A(p.message,{variant:"success"});break;case"info":A(p.message,{variant:"info"});break;default:a.error(p),A(p.message??R.contactSupport,{variant:"error"})}else a.error(p),A(R.contactSupport,{variant:"error"})},p=>{a.error("error",p),A(p??R.contactSupport,{variant:"error"})})}}),e.jsx(xe,{title:"Truncate table?",message:"This action cannot be undone!",open:D,setOpen:L,onConfirm:()=>{Xs(s,t,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":A(p.message,{variant:"success"});break;case"info":A(p.message,{variant:"info"});break;default:a.error(p),A(p.message??R.contactSupport,{variant:"error"})}else a.error(p),A(R.contactSupport,{variant:"error"})},p=>{a.error("error",p),A(p??R.contactSupport,{variant:"error"})})}}),e.jsx(xe,{title:`Drop ${r===K.VIEW?"view":"table"}?`,message:"This action cannot be undone!",open:F,setOpen:P,onConfirm:()=>{Js(s,t,r,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":r===K.VIEW?i(Ze({dbs:s})):i(De({dbs:s})),i(es({})),A(p.message,{variant:"success"});break;case"info":A(p.message,{variant:"info"});break;default:a.error(p),A(p.message??R.contactSupport,{variant:"error"})}else a.error(p),A(R.contactSupport,{variant:"error"})},p=>{a.error("error",p),A(p??R.contactSupport,{variant:"error"})})}})]})},ir=({dbs:s,tbl:t,typ:r})=>{var h,f;a.debug(s,t,r);const n=H(),[i,o]=d.useState(ye(cs.getState()));a.debug(i);const[g,x]=d.useState(""),[m,y]=d.useState(!1),[c,u]=d.useState({}),[S,j]=d.useState(!1),[T,v]=d.useState(!1);d.useEffect(()=>{m||I()},[s,t]);const I=()=>{pa(s,t,!0,C=>{var w,U;const _=C==null?void 0:C.data;if(a.debug("response data",s,t,_),(w=_==null?void 0:_.access)!=null&&w.select&&Array.isArray(_.access.select)&&_.access.select.includes("POST")){const z={..._.settings};z.list_labels={..._.table_labels},z.form_labels={..._.form_labels},z.column_media={..._.wp_media},delete z.hyperlinks,delete z.ui,delete z.wp;const X={..._};u(X),n(en({settings:z,metaData:X})),y(!0)}else{let z=R.contactSupport;(U=C==null?void 0:C.data)!=null&&U.message&&(z=C.data.message+" - check console for more information"),a.error(z),x(z)}},C=>{a.error("error",C),x(C??R.contactSupport)})};d.useEffect(()=>{g!==""&&(n(Ls({error:g})),n(bs({})),n(es({})))},[g]);const M=k(C=>ye(C));a.debug(M);const N=((h=ae)==null?void 0:h.palette.mode)===sn.LIGHT?(f=ae)==null?void 0:f.palette.primary.main:"",D=C=>{n(tn({anchor:C}))},L=()=>{n(es({})),n(bs({}))},F=()=>{S?v(!0):L()},P=()=>{const C={...M};let _=!1;xn(s,t,C,w=>{if(w!=null&&w.code&&(w==null?void 0:w.message)!==void 0)switch(w.code){case"ok":A(w.message,{variant:"success"});break;case"info":A(w.message,{variant:"info"});break;default:a.error(w),A(w.message??R.contactSupport,{variant:"error"}),_=!0}else a.error(w),A(R.contactSupport,{variant:"error"}),_=!0},w=>{a.error(w),A(w??R.contactSupport,{variant:"error"}),_=!0}),_||o(ye(cs.getState())),j(!1)},E=()=>{S?(P(),setTimeout(()=>{L()},1e3)):L()},[B,O]=d.useState("1"),b=(C,_)=>{O(_)};return g!==""?null:e.jsxs(e.Fragment,{children:[e.jsxs(Yn,{closeDrawer:F,children:[e.jsx(as,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(rs,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(l,{sx:{flexGrow:1},children:[e.jsx(Se,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(Se,{sx:{fontSize:"10px",display:{xs:"none",sm:"block"},paddingLeft:"10px"},children:[s," - ",t]})]}),e.jsx(Je,{title:"Dock to left",position:"bottom",children:e.jsx(ne,{onClick:()=>{D(ys.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Qn,{})})}),e.jsx(Je,{title:"Dock to right",position:"bottom",children:e.jsx(ne,{onClick:()=>{D(ys.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Xn,{})})}),e.jsx(Je,{title:"Close",position:"bottom",children:e.jsx(ne,{onClick:F,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Ds,{})})})]})}),e.jsx(ps,{className:"pp-settings-container",children:e.jsx(us,{sx:{padding:0,margin:0},children:m?e.jsxs(Jn,{value:B,children:[e.jsxs(Zn,{variant:"fullWidth",textColor:"primary",onChange:b,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(_s,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(_s,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(l,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(Cs,{value:"1",children:e.jsx(rr,{dbs:s,tbl:t,typ:r,metaData:c})}),e.jsxs(Cs,{value:"2",children:[e.jsx(tr,{dbs:s,tbl:t,setIsUpdated:j}),e.jsx(nr,{dbs:s,tbl:t,setIsUpdated:j}),e.jsx(ar,{dbs:s,tbl:t,typ:r,metaData:c,setIsUpdated:j}),e.jsx(sr,{dbs:s,tbl:t})]})]})]}):e.jsx(l,{sx:{padding:"30px"},children:e.jsx(hs,{title:"Loading data..."})})})}),e.jsx(ps,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:N},children:e.jsxs(us,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(G,{variant:"outlined",className:"footer_action_button_apply",onClick:P,children:"Apply"}),e.jsx(G,{variant:"outlined",className:"footer_action_button",onClick:E,children:"OK"}),e.jsx(G,{variant:"outlined",className:"footer_action_button",onClick:F,children:"Cancel"})]})})]}),e.jsx(xe,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:T,setOpen:v,onConfirm:()=>{L()}})]})},or=()=>{const s=k(t=>gs(t));return a.debug(s),e.jsx(e.Fragment,{children:s!==void 0&&s.action===ue.MANAGE&&e.jsx(ir,{dbs:s.dbs,tbl:s.tbl,typ:s.typ})})},qr=()=>{const s=ea();return e.jsx(Ln,{theme:s,children:e.jsxs(l,{sx:{"& > :nth-of-type(2)":{visibility:"hidden",position:"fixed"}},children:[e.jsx(er,{}),e.jsx(Za,{}),e.jsx(or,{})]})})};export{qr as default};
