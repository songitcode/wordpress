import{l,r as O,bR as R,j as e,ci as m,cD as T,e as c}from"./main-1.0.15.js";import{a as V,B as w,T as x,ap as k,$ as z,aF as B,p as b,am as U}from"./main-1.0.15-e2ad00f6.js";import{C as q}from"./settings-1.0.15-3913c57c.js";import{d as F}from"./ActionsDml-1.0.15-409ee4a6.js";import{I as f}from"./iconBase-1.0.15-5866dbfd.js";import"./FormControlLabel-1.0.15-2f48df6c.js";import"./TextField-1.0.15-73384817.js";import"./Close-1.0.15-8d33e66c.js";import"./Menu-1.0.15-3ae4ddd1.js";import"./useScreenSize-1.0.15-a1dd46fa.js";import"./DialogContent-1.0.15-e50a43f8.js";import"./Tabs-1.0.15-c2b715a3.js";const _=({metaData:r,appId:n,rowId:o,rowData:j,storeTableSettings:d,appLanguage:s,tableDensity:t,showForm:h,refetch:p})=>{var v,a;l.debug(r,n,o,j,t);const A=V(),[P,u]=O.useState(!1),C=Object.keys(o).length>0,E=d.viewLink,M=!R(r)&&((v=r==null?void 0:r.privs)==null?void 0:v.update)&&d.transactions.update&&C,y=!R(r)&&((a=r==null?void 0:r.privs)==null?void 0:a.delete)&&d.transactions.delete&&C;return e.jsxs(w,{sx:{display:"flex",alignItems:"center",gap:0},children:[E&&e.jsx(x,{title:s.view,children:e.jsx(f,{color:"primary",size:t===m.COMPACT?"small":"medium",onClick:i=>{Object.keys(o).length===0&&A(T({appId:n,data:j,context:null})),h(o,k.VIEW),i.stopPropagation()},children:e.jsx(z,{})})}),M&&e.jsx(x,{title:s.edit,children:e.jsx(f,{color:"primary",size:t===m.COMPACT?"small":"medium",onClick:i=>{h(o,k.UPDATE),i.stopPropagation()},children:e.jsx(B,{})})}),y&&e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s.delete,children:e.jsx(f,{color:"error",size:t===m.COMPACT?"small":"medium",onClick:i=>{u(!0),i.stopPropagation()},children:e.jsx(b,{})})}),e.jsx(q,{title:s.deleteRowTitle,message:s.deleteRowMessage,open:P,setOpen:u,onConfirm:()=>{F(n,o,i=>{if(i!=null&&i.code&&(i!=null&&i.message))switch(i.code){case"ok":c(s.deletedSuccessful,{variant:"success"}),p();break;default:l.error(i),c(i.message??s.invalidResponse,{variant:"error"})}else l.error(i),c(s.invalidResponse,{variant:"error"})},i=>{l.error("error",i),c(i??s.invalidResponse,{variant:"error"})})},locale:s,theme:U})]})]})};export{_ as default};
