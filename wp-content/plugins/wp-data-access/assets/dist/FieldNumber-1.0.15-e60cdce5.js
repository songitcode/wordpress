import{bd as Q,r as j,l as ve,cK as Oe,a6 as Fe,d_ as Ce,i as je,j as Le,dZ as ke,dY as Pe}from"./main-1.0.15.js";import{an as fe}from"./main-1.0.15-e2ad00f6.js";import{T as Ke}from"./TextField-1.0.15-73384817.js";import"./iconBase-1.0.15-5866dbfd.js";import"./Close-1.0.15-8d33e66c.js";import"./Menu-1.0.15-3ae4ddd1.js";function Se(e,r){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)r.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(a[n[t]]=e[n[t]]);return a}var re;(function(e){e.event="event",e.props="prop"})(re||(re={}));function z(){}function Ue(e){var r,a=void 0;return function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return r&&n.length===r.length&&n.every(function(i,f){return i===r[f]})||(r=n,a=e.apply(void 0,n)),a}}function te(e){return!!(e||"").match(/\d/)}function X(e){return e==null}function We(e){return typeof e=="number"&&isNaN(e)}function pe(e){return X(e)||We(e)||typeof e=="number"&&!isFinite(e)}function xe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function $e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Me(e,r,a){var n=$e(a),t=e.search(/[1-9]/);return t=t===-1?e.length:t,e.substring(0,t)+e.substring(t,e.length).replace(n,"$1"+r)}function Ge(e){var r=j.useRef(e);r.current=e;var a=j.useRef(function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return r.current.apply(r,n)});return a.current}function se(e,r){r===void 0&&(r=!0);var a=e[0]==="-",n=a&&r;e=e.replace("-","");var t=e.split("."),i=t[0],f=t[1]||"";return{beforeDecimal:i,afterDecimal:f,hasNegation:a,addNegation:n}}function Ze(e){if(!e)return e;var r=e[0]==="-";r&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",t=a[1]||"";return(r?"-":"")+n+(t?"."+t:"")}function be(e,r,a){for(var n="",t=a?"0":"",i=0;i<=r-1;i++)n+=e[i]||t;return n}function de(e,r){return Array(r+1).join(e)}function ye(e){var r=e+"",a=r[0]==="-"?"-":"";a&&(r=r.substring(1));var n=r.split(/[eE]/g),t=n[0],i=n[1];if(i=Number(i),!i)return a+t;t=t.replace(".","");var f=1+i,m=t.length;return f<0?t="0."+de("0",Math.abs(f))+t:f>=m?t=t+de("0",f-m):t=(t.substring(0,f)||"0")+"."+t.substring(f),a+t}function ge(e,r,a){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||a)&&r,t=se(e),i=t.beforeDecimal,f=t.afterDecimal,m=t.hasNegation,b=parseFloat("0."+(f||"0")),h=f.length<=r?"0."+f:b.toFixed(r),S=h.split("."),g=i;i&&Number(S[0])&&(g=i.split("").reverse().reduce(function(w,E,s){return w.length>s?(Number(w[0])+Number(E)).toString()+w.substring(1,w.length):E+w},S[0]));var p=be(S[1]||"",r,a),x=m?"-":"",l=n?".":"";return""+x+g+l+p}function H(e,r){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",r),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(r,r),!0):(e.focus(),!1)}}var Ne=Ue(function(e,r){for(var a=0,n=0,t=e.length,i=r.length;e[a]===r[a]&&a<t;)a++;for(;e[t-1-n]===r[i-1-n]&&i-n>a&&t-n>a;)n++;return{from:{start:a,end:t-n},to:{start:a,end:i-n}}}),ze=function(e,r){var a=Math.min(e.selectionStart,r);return{from:{start:a,end:e.selectionEnd},to:{start:a,end:r}}};function qe(e,r,a){return Math.min(Math.max(e,r),a)}function le(e){return Math.max(e.selectionStart,e.selectionEnd)}function He(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Ye(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Je(e){var r=e.currentValue,a=e.formattedValue,n=e.currentValueIndex,t=e.formattedValueIndex;return r[n]===a[t]}function Qe(e,r,a,n,t,i,f){f===void 0&&(f=Je);var m=t.findIndex(function(F){return F}),b=e.slice(0,m);!r&&!a.startsWith(b)&&(r=b,a=b+a,n=n+b.length);for(var h=a.length,S=e.length,g={},p=new Array(h),x=0;x<h;x++){p[x]=-1;for(var l=0,w=S;l<w;l++){var E=f({currentValue:a,lastValue:r,formattedValue:e,currentValueIndex:x,formattedValueIndex:l});if(E&&g[l]!==!0){p[x]=l,g[l]=!0;break}}}for(var s=n;s<h&&(p[s]===-1||!i(a[s]));)s++;var R=s===h||p[s]===-1?S:p[s];for(s=n-1;s>0&&p[s]===-1;)s--;var O=s===-1||p[s]===-1?0:p[s]+1;return O>R?R:n-O<R-n?O:R}function me(e,r,a,n){var t=e.length;if(r=qe(r,0,t),n==="left"){for(;r>=0&&!a[r];)r--;r===-1&&(r=a.indexOf(!0))}else{for(;r<=t&&!a[r];)r++;r>t&&(r=a.lastIndexOf(!0))}return r===-1&&(r=t),r}function Xe(e){for(var r=Array.from({length:e.length+1}).map(function(){return!0}),a=0,n=r.length;a<n;a++)r[a]=!!(te(e[a])||te(e[a-1]));return r}function we(e,r,a,n,t,i){i===void 0&&(i=z);var f=Ge(function(l,w){var E,s;return pe(l)?(s="",E=""):typeof l=="number"||w?(s=typeof l=="number"?ye(l):l,E=n(s)):(s=t(l,void 0),E=n(s)),{formattedValue:E,numAsString:s}}),m=j.useState(function(){return f(X(e)?r:e,a)}),b=m[0],h=m[1],S=function(l,w){l.formattedValue!==b.formattedValue&&h({formattedValue:l.formattedValue,numAsString:l.value}),i(l,w)},g=e,p=a;X(e)&&(g=b.numAsString,p=!0);var x=f(g,p);return j.useMemo(function(){h(x)},[x.formattedValue]),[b,S]}function er(e){return e.replace(/[^0-9]/g,"")}function rr(e){return e}function tr(e){var r=e.type;r===void 0&&(r="text");var a=e.displayType;a===void 0&&(a="input");var n=e.customInput,t=e.renderText,i=e.getInputRef,f=e.format;f===void 0&&(f=rr);var m=e.removeFormatting;m===void 0&&(m=er);var b=e.defaultValue,h=e.valueIsNumericString,S=e.onValueChange,g=e.isAllowed,p=e.onChange;p===void 0&&(p=z);var x=e.onKeyDown;x===void 0&&(x=z);var l=e.onMouseUp;l===void 0&&(l=z);var w=e.onFocus;w===void 0&&(w=z);var E=e.onBlur;E===void 0&&(E=z);var s=e.value,R=e.getCaretBoundary;R===void 0&&(R=Xe);var O=e.isValidInputCharacter;O===void 0&&(O=te);var F=e.isCharacterSame,L=Se(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),q=we(s,b,!!h,f,m,S),K=q[0],N=K.formattedValue,k=K.numAsString,W=q[1],P=j.useRef(),$=j.useRef({formattedValue:N,numAsString:k}),M=function(o,u){$.current={formattedValue:o.formattedValue,numAsString:o.value},W(o,u)},Y=j.useState(!1),ee=Y[0],d=Y[1],c=j.useRef(null),V=j.useRef({setCaretTimeout:null,focusTimeout:null});j.useEffect(function(){return d(!0),function(){clearTimeout(V.current.setCaretTimeout),clearTimeout(V.current.focusTimeout)}},[]);var T=f,_=function(o,u){var v=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(v)?void 0:v}},A=function(o,u,v){o.selectionStart===0&&o.selectionEnd===o.value.length||(H(o,u),V.current.setCaretTimeout=setTimeout(function(){o.value===v&&o.selectionStart!==u&&H(o,u)},0))},B=function(o,u,v){return me(o,u,R(o),v)},J=function(o,u,v){var I=R(u),C=Qe(u,N,o,v,I,O,F);return C=me(u,C,I),C},ie=function(o){var u=o.formattedValue;u===void 0&&(u="");var v=o.input,I=o.source,C=o.event,D=o.numAsString,y;if(v){var U=o.inputValue||v.value,G=le(v);v.value=u,y=J(U,u,G),y!==void 0&&A(v,y,u)}u!==N&&M(_(u,D),{event:C,source:I})};j.useEffect(function(){var o=$.current,u=o.formattedValue,v=o.numAsString;(N!==u||k!==v)&&M(_(N,k),{event:void 0,source:re.props})},[N,k]);var ae=c.current?le(c.current):void 0,Ve=typeof window<"u"?j.useLayoutEffect:j.useEffect;Ve(function(){var o=c.current;if(N!==$.current.formattedValue&&o){var u=J($.current.formattedValue,N,ae);o.value=N,A(o,u,N)}},[N]);var Ie=function(o,u,v){var I=u.target,C=P.current?ze(P.current,I.selectionEnd):Ne(N,o),D=Object.assign(Object.assign({},C),{lastValue:N}),y=m(o,D),U=T(y);if(y=m(U,void 0),g&&!g(_(U,y))){var G=u.target,Z=le(G),ue=J(o,N,Z);return G.value=N,A(G,ue,N),!1}return ie({formattedValue:U,numAsString:y,inputValue:o,event:u,source:v,input:u.target}),!0},oe=function(o,u){u===void 0&&(u=0);var v=o.selectionStart,I=o.selectionEnd;P.current={selectionStart:v,selectionEnd:I+u}},De=function(o){var u=o.target,v=u.value,I=Ie(v,o,re.event);I&&p(o),P.current=void 0},Ee=function(o){var u=o.target,v=o.key,I=u.selectionStart,C=u.selectionEnd,D=u.value;D===void 0&&(D="");var y;v==="ArrowLeft"||v==="Backspace"?y=Math.max(I-1,0):v==="ArrowRight"?y=Math.min(I+1,D.length):v==="Delete"&&(y=I);var U=0;v==="Delete"&&I===C&&(U=1);var G=v==="ArrowLeft"||v==="ArrowRight";if(y===void 0||I!==C&&!G){x(o),oe(u,U);return}var Z=y;if(G){var ue=v==="ArrowLeft"?"left":"right";Z=B(D,y,ue),Z!==y&&o.preventDefault()}else v==="Delete"&&!O(D[y])?Z=B(D,y,"right"):v==="Backspace"&&!O(D[y])&&(Z=B(D,y,"left"));Z!==y&&A(u,Z,D),x(o),oe(u,U)},Ae=function(o){var u=o.target,v=function(){var I=u.selectionStart,C=u.selectionEnd,D=u.value;if(D===void 0&&(D=""),I===C){var y=B(D,I);y!==I&&A(u,y,D)}};v(),requestAnimationFrame(function(){v()}),l(o),oe(u)},Te=function(o){o.persist&&o.persist();var u=o.target,v=o.currentTarget;c.current=u,V.current.focusTimeout=setTimeout(function(){var I=u.selectionStart,C=u.selectionEnd,D=u.value;D===void 0&&(D="");var y=B(D,I);y!==I&&!(I===0&&C===D.length)&&A(u,y,D),w(Object.assign(Object.assign({},o),{currentTarget:v}))},0)},Re=function(o){c.current=null,clearTimeout(V.current.focusTimeout),clearTimeout(V.current.setCaretTimeout),E(o)},_e=ee&&He()?"numeric":void 0,ce=Object.assign({inputMode:_e},L,{type:r,value:N,onChange:De,onKeyDown:Ee,onMouseUp:Ae,onFocus:Te,onBlur:Re});if(a==="text")return t?Q.createElement(Q.Fragment,null,t(N,L)||null):Q.createElement("span",Object.assign({},L,{ref:i}),N);if(n){var Be=n;return Q.createElement(Be,Object.assign({},ce,{ref:i}))}return Q.createElement("input",Object.assign({},ce,{ref:i}))}function he(e,r){var a=r.decimalScale,n=r.fixedDecimalScale,t=r.prefix;t===void 0&&(t="");var i=r.suffix;i===void 0&&(i="");var f=r.allowNegative,m=r.thousandsGroupStyle;if(m===void 0&&(m="thousand"),e===""||e==="-")return e;var b=ne(r),h=b.thousandSeparator,S=b.decimalSeparator,g=a!==0&&e.indexOf(".")!==-1||a&&n,p=se(e,f),x=p.beforeDecimal,l=p.afterDecimal,w=p.addNegation;return a!==void 0&&(l=be(l,a,!!n)),h&&(x=Me(x,h,m)),t&&(x=t+x),i&&(l=l+i),w&&(x="-"+x),e=x+(g&&S||"")+l,e}function ne(e){var r=e.decimalSeparator;r===void 0&&(r=".");var a=e.thousandSeparator,n=e.allowedDecimalSeparators;return a===!0&&(a=","),n||(n=[r,"."]),{decimalSeparator:r,thousandSeparator:a,allowedDecimalSeparators:n}}function ar(e,r){e===void 0&&(e="");var a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),t=a.test(e),i=n.test(e);return e=e.replace(/-/g,""),t&&!i&&r&&(e="-"+e),e}function nr(e,r){return new RegExp("(^-)|[0-9]|"+xe(e),r?"g":void 0)}function ir(e,r,a){return e===""?!0:!(r!=null&&r.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function or(e,r,a){var n;r===void 0&&(r=Ye(e));var t=a.allowNegative,i=a.prefix;i===void 0&&(i="");var f=a.suffix;f===void 0&&(f="");var m=a.decimalScale,b=r.from,h=r.to,S=h.start,g=h.end,p=ne(a),x=p.allowedDecimalSeparators,l=p.decimalSeparator,w=e[g]===l;if(te(e)&&(e===i||e===f)&&r.lastValue==="")return e;if(g-S===1&&x.indexOf(e[S])!==-1){var E=m===0?"":l;e=e.substring(0,S)+E+e.substring(S+1,e.length)}var s=function(c,V,T){var _=!1,A=!1;i.startsWith("-")?_=!1:c.startsWith("--")?(_=!1,A=!0):f.startsWith("-")&&c.length===f.length?_=!1:c[0]==="-"&&(_=!0);var B=_?1:0;return A&&(B=2),B&&(c=c.substring(B),V-=B,T-=B),{value:c,start:V,end:T,hasNegation:_}},R=s(e,S,g),O=R.hasNegation;n=R,e=n.value,S=n.start,g=n.end;var F=s(r.lastValue,b.start,b.end),L=F.start,q=F.end,K=F.value,N=e.substring(S,g);e.length&&K.length&&(L>K.length-f.length||q<i.length)&&!(N&&f.startsWith(N))&&(e=K);var k=0;e.startsWith(i)?k+=i.length:S<i.length&&(k=S),e=e.substring(k),g-=k;var W=e.length,P=e.length-f.length;e.endsWith(f)?W=P:(g>P||g>e.length-f.length)&&(W=g),e=e.substring(0,W),e=ar(O?"-"+e:e,t),e=(e.match(nr(l,!0))||[]).join("");var $=e.indexOf(l);e=e.replace(new RegExp(xe(l),"g"),function(c,V){return V===$?".":""});var M=se(e,t),Y=M.beforeDecimal,ee=M.afterDecimal,d=M.addNegation;return h.end-h.start<b.end-b.start&&Y===""&&w&&!parseFloat(ee)&&(e=d?"-":""),e}function ur(e,r){var a=r.prefix;a===void 0&&(a="");var n=r.suffix;n===void 0&&(n="");var t=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";t.fill(!1,0,a.length+(i?1:0));var f=e.length;return t.fill(!1,f-n.length+1,f+1),t}function fr(e){var r=ne(e),a=r.thousandSeparator,n=r.decimalSeparator,t=e.prefix;t===void 0&&(t="");var i=e.allowNegative;if(i===void 0&&(i=!0),a===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+a+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return t.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+t+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function lr(e){e=fr(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var r=e.suffix,a=e.allowNegative,n=e.allowLeadingZeros,t=e.onKeyDown;t===void 0&&(t=z);var i=e.onBlur;i===void 0&&(i=z);var f=e.thousandSeparator,m=e.decimalScale,b=e.fixedDecimalScale,h=e.prefix;h===void 0&&(h="");var S=e.defaultValue,g=e.value,p=e.valueIsNumericString,x=e.onValueChange,l=Se(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),w=ne(e),E=w.decimalSeparator,s=w.allowedDecimalSeparators,R=function(d){return he(d,e)},O=function(d,c){return or(d,c,e)},F=X(g)?S:g,L=p??ir(F,h,r);X(g)?X(S)||(L=L||typeof S=="number"):L=L||typeof g=="number";var q=function(d){return pe(d)?d:(typeof d=="number"&&(d=ye(d)),L&&typeof m=="number"?ge(d,m,!!b):d)},K=we(q(g),q(S),!!L,R,O,x),N=K[0],k=N.numAsString,W=N.formattedValue,P=K[1],$=function(d){var c=d.target,V=d.key,T=c.selectionStart,_=c.selectionEnd,A=c.value;if(A===void 0&&(A=""),(V==="Backspace"||V==="Delete")&&_<h.length){d.preventDefault();return}if(T!==_){t(d);return}V==="Backspace"&&A[0]==="-"&&T===h.length+1&&a&&H(c,1),m&&b&&(V==="Backspace"&&A[T-1]===E?(H(c,T-1),d.preventDefault()):V==="Delete"&&A[T]===E&&d.preventDefault()),s!=null&&s.includes(V)&&A[T]===E&&H(c,T+1);var B=f===!0?",":f;V==="Backspace"&&A[T-1]===B&&H(c,T-1),V==="Delete"&&A[T]===B&&H(c,T+1),t(d)},M=function(d){var c=k;if(c.match(/\d/g)||(c=""),n||(c=Ze(c)),b&&m&&(c=ge(c,m,b)),c!==k){var V=he(c,e);P({formattedValue:V,value:c,floatValue:parseFloat(c)},{event:d,source:re.event})}i(d)},Y=function(d){return d===E?!0:te(d)},ee=function(d){var c=d.currentValue,V=d.lastValue,T=d.formattedValue,_=d.currentValueIndex,A=d.formattedValueIndex,B=c[_],J=T[A],ie=Ne(V,c),ae=ie.to;return _>=ae.start&&_<ae.end&&s&&s.includes(B)&&J===E?!0:B===J};return Object.assign(Object.assign({},l),{value:W,valueIsNumericString:!1,isValidInputCharacter:Y,isCharacterSame:ee,onValueChange:P,format:R,removeFormatting:O,getCaretBoundary:function(d){return ur(d,e)},onKeyDown:$,onBlur:M})}function sr(e){var r=lr(e);return Q.createElement(tr,Object.assign({},r))}const Sr=({appId:e,columnName:r,columnValue:a,columnMetaData:n,storeColumn:t,columnValidation:i,onColumnChange:f,metaData:m,storeForm:b,formMode:h,locale:S,language:g})=>{ve.debug(e,r,a,n,t,i,m,b,h,S,g);const p=Oe(Fe.getState(),e,r);ve.debug("column",p);const x=parseInt(n.numeric_precision),l=parseInt(n.numeric_scale),w=n.column_type.includes("unsigned"),E={className:t.classNames,readOnly:h===fe.VIEW||h===fe.UPDATE&&m.primary_key.includes(r)||h===fe.INSERT&&n.extra==="auto_increment"},s=Ce((g==null?void 0:g.code)??je.code),R=i!=null&&i.error?i==null?void 0:i.text:S.enterNumber+(w?" unsigned":"")+" ("+x.toString()+","+l.toString()+")",O=t.localize?((t==null?void 0:t.prefix)??"")+`9${s.thousandSeperator}999${s.decimalSeperator}99`+((t==null?void 0:t.suffix)??""):"";return Le.jsx(sr,{customInput:Ke,error:i==null?void 0:i.error,label:n.formLabel,thousandSeparator:t.localize?s.thousandSeperator:void 0,decimalSeparator:t.localize?s.decimalSeperator:void 0,decimalScale:l,value:a??"",required:n.is_nullable==="NO",inputProps:E,helperText:ke(t,R),variant:Pe(),onValueChange:({value:F})=>{F===""&&n.is_nullable!=="NO"?f(r,null):f(r,F)},onInvalid:F=>{F.preventDefault()},prefix:(t==null?void 0:t.prefix)??"",suffix:(t==null?void 0:t.suffix)??"",sx:{"& input":{textAlign:t.alignment}},placeholder:O})};export{Sr as default};
