import{l as R,cx as X,r,j as _,dY as $,dZ as t,_ as h}from"./main-1.0.15.js";import{l as u}from"./ActionsDml-1.0.15-409ee4a6.js";import{u as c,an as H}from"./main-1.0.15-e2ad00f6.js";import{i as N}from"./index-1.0.15-3f6c5bf6.js";import{A as I,T as V}from"./TextField-1.0.15-73384817.js";import"./iconBase-1.0.15-5866dbfd.js";import"./Close-1.0.15-8d33e66c.js";import"./Menu-1.0.15-3ae4ddd1.js";const M=({appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,storeForm:E,formMode:y,locale:x})=>{var F,U;R.debug(v,d,j,P,e,i,f,s,E,y,x);const k=c(p=>X(p,v));R.debug("data",k);const[A,z]=r.useState([]);R.debug("lov",A);const[W,Z]=r.useState(Array.isArray((F=i.lookup)==null?void 0:F.dynamicConditions)?(U=i.lookup)==null?void 0:U.dynamicConditions.map(p=>({columnName:p.tableColumnName,columnValue:""})):[]);R.debug("conditions",W),r.useEffect(()=>{var p,O;Array.isArray((p=i.lookup)==null?void 0:p.dynamicConditions)&&((O=i.lookup)==null||O.dynamicConditions.map(b=>{k[b.tableColumnName]===void 0&&R.error("Invalid lookup: column "+b.tableColumnName+" in dynamic condition not found.")})),W.length===0&&q()},[i.lookup]),r.useEffect(()=>{var p,O;if(Object.keys(W).length>0){const b=Array.isArray((p=i.lookup)==null?void 0:p.dynamicConditions)?(O=i.lookup)==null?void 0:O.dynamicConditions.map(S=>({columnName:S.lookupColumnName,columnValue:k[S.tableColumnName]??""})):[];if(R.debug(b),!N(W,b)){const S={};b.length>0&&b.map(T=>{S[T.columnName]=T.columnValue}),R.debug("reloading dynamic lookup",d,b),q(S),Z(b)}}},[k]);const q=(p={})=>{var O,b;u(v,"form",d,((O=i.lookup)==null?void 0:O.key)??"",((b=i.lookup)==null?void 0:b.value)??"",p,{},S=>{var T,w,B;if(R.debug(S.data),!((T=i.lookup)!=null&&T.value.includes(",")))z(S.data);else{const J=(w=i.lookup)==null?void 0:w.value.split(","),Y=[];for(let g=0;g<S.data.length;g++){const K=J.map(Q=>S.data[g][Q]).join(((B=i.lookup)==null?void 0:B.delimiter)??"");Y.push({key:S.data[g].key,value:K})}z(Y)}},S=>{R.error(S)})},G=r.useMemo(()=>A.filter(p=>p.key===j)[0]??null,[j,A]);return _.jsx(I,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:A,getOptionLabel:p=>Array.isArray(p.value)?p.value[0]:p.value,value:G,onChange:(p,O)=>{O!==null?L(d,O==null?void 0:O.key):L(d,null)},disabled:y===H.VIEW||y===H.UPDATE&&s.primary_key.includes(d),renderInput:p=>_.jsx(V,{label:e.formLabel,required:e.is_nullable==="NO",...p,inputProps:{...p.inputProps,autoComplete:"new-password"},variant:$(),helperText:t(i,x.selectEnum),disabled:y===H.VIEW||y===H.UPDATE&&s.primary_key.includes(d)})})},C=r.lazy(()=>h(()=>import("./FieldText-1.0.15-2c5dcf40.js"),["./FieldText-1.0.15-2c5dcf40.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./InputAdornment-1.0.15-4ec316af.js"],import.meta.url)),n=r.lazy(()=>h(()=>import("./FieldTextarea-1.0.15-8838e8ab.js"),["./FieldTextarea-1.0.15-8838e8ab.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js"],import.meta.url)),D=r.lazy(()=>h(()=>import("./FieldNumber-1.0.15-e60cdce5.js"),["./FieldNumber-1.0.15-e60cdce5.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js"],import.meta.url)),l=r.lazy(()=>h(()=>import("./FieldSet-1.0.15-7ec8bc14.js"),["./FieldSet-1.0.15-7ec8bc14.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./MenuItem-1.0.15-cb0e11e9.js"],import.meta.url)),o=r.lazy(()=>h(()=>import("./FieldEnum-1.0.15-2bf39a69.js"),["./FieldEnum-1.0.15-2bf39a69.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./MenuItem-1.0.15-cb0e11e9.js","./EnumTypeEnum-1.0.15-7ffcf33a.js","./RadioGroup-1.0.15-f84d6091.js","./Radio-1.0.15-7d52029a.js","./FormControlLabel-1.0.15-2f48df6c.js"],import.meta.url)),m=r.lazy(()=>h(()=>import("./FieldDate-1.0.15-7fa4edad.js"),["./FieldDate-1.0.15-7fa4edad.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./FormContainer-1.0.15-e5968243.js","./useScreenSize-1.0.15-a1dd46fa.js","./ActionsDml-1.0.15-409ee4a6.js","./CardActions-1.0.15-e9dc43ac.js","./FormContainer-1.0.15-5da27d24.css","./useMobilePicker-1.0.15-5df19a3e.js","./DialogContent-1.0.15-e50a43f8.js","./Menu-1.0.15-3ae4ddd1.js","./InputAdornment-1.0.15-4ec316af.js","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./AdapterDayjs-1.0.15-87bf1f1f.js","./DatePicker-1.0.15-cd97ffeb.js","./dateViewRenderers-1.0.15-2bbfacab.js"],import.meta.url)),a=r.lazy(()=>h(()=>import("./FieldDatetime-1.0.15-b6734c4e.js"),["./FieldDatetime-1.0.15-b6734c4e.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./FormContainer-1.0.15-e5968243.js","./useScreenSize-1.0.15-a1dd46fa.js","./ActionsDml-1.0.15-409ee4a6.js","./CardActions-1.0.15-e9dc43ac.js","./FormContainer-1.0.15-5da27d24.css","./useMobilePicker-1.0.15-5df19a3e.js","./DialogContent-1.0.15-e50a43f8.js","./Menu-1.0.15-3ae4ddd1.js","./InputAdornment-1.0.15-4ec316af.js","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./AdapterDayjs-1.0.15-87bf1f1f.js","./DateTimePicker-1.0.15-b600d307.js","./Tabs-1.0.15-c2b715a3.js","./date-time-utils-1.0.15-31b6fdea.js","./MenuItem-1.0.15-cb0e11e9.js","./dateViewRenderers-1.0.15-2bbfacab.js"],import.meta.url)),ii=r.lazy(()=>h(()=>import("./FieldTime-1.0.15-0eb97ee2.js"),["./FieldTime-1.0.15-0eb97ee2.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./FormContainer-1.0.15-e5968243.js","./useScreenSize-1.0.15-a1dd46fa.js","./ActionsDml-1.0.15-409ee4a6.js","./CardActions-1.0.15-e9dc43ac.js","./FormContainer-1.0.15-5da27d24.css","./useMobilePicker-1.0.15-5df19a3e.js","./DialogContent-1.0.15-e50a43f8.js","./Menu-1.0.15-3ae4ddd1.js","./InputAdornment-1.0.15-4ec316af.js","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./AdapterDayjs-1.0.15-87bf1f1f.js","./TimePicker-1.0.15-1545716b.js","./date-time-utils-1.0.15-31b6fdea.js","./MenuItem-1.0.15-cb0e11e9.js"],import.meta.url)),si=r.lazy(()=>h(()=>import("./FieldCheckbox-1.0.15-4d9988b6.js"),["./FieldCheckbox-1.0.15-4d9988b6.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./FormControlLabel-1.0.15-2f48df6c.js","./Checkbox-1.0.15-19533231.js"],import.meta.url)),ri=r.lazy(()=>h(()=>import("./ColumnWpMedia-1.0.15-122f50b4.js"),["./ColumnWpMedia-1.0.15-122f50b4.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./index.esm-1.0.15-3dc3cbe3.js","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./useScreenSize-1.0.15-a1dd46fa.js"],import.meta.url)),di=r.lazy(()=>h(()=>import("./ColumnHyperlink-1.0.15-5b72f348.js"),["./ColumnHyperlink-1.0.15-5b72f348.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./FormControlLabel-1.0.15-2f48df6c.js","./Checkbox-1.0.15-19533231.js"],import.meta.url)),Ai=({appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})=>{if(R.debug(v,d,j,P,e,i,s,E,y,x,z),s!=null&&s.media[d]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(s==null?void 0:s.media[d]))return _.jsx(r.Suspense,{children:_.jsx(ri,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,columnMedia:E==null?void 0:E.media[d],mediaType:s==null?void 0:s.media[d]})});if((s==null?void 0:s.media[d])==="HyperlinkObject")return _.jsx(r.Suspense,{children:_.jsx(di,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})})}else{if(e.column_type.toLowerCase()==="tinyint(1)")return _.jsx(r.Suspense,{children:_.jsx(si,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});if(i.lookup!==void 0)return _.jsx(M,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})}switch(e.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return _.jsx(r.Suspense,{children:_.jsx(D,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"enum":return _.jsx(r.Suspense,{children:_.jsx(o,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"set":return _.jsx(r.Suspense,{children:_.jsx(l,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"time":return _.jsx(r.Suspense,{children:_.jsx(ii,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"date":return _.jsx(r.Suspense,{children:_.jsx(m,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"datetime":case"timestamp":return _.jsx(r.Suspense,{children:_.jsx(a,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"tinytext":case"text":case"mediumtext":case"longtext":return _.jsx(r.Suspense,{children:_.jsx(n,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});default:return _.jsx(r.Suspense,{children:_.jsx(C,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:i,columnValidation:f,onColumnChange:L,metaData:s,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})})}};export{Ai as default};
