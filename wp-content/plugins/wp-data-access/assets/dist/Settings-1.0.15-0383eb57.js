import{l as o,j as e,d5 as Z,r as v,cb as b,d6 as ve,d7 as Fe,_ as we,d8 as Ue,c8 as ke,J as U,d9 as Q,da as Pe,db as Le,dc as Ve,dd as Re,de as _e,df as Ee,dg as c,dh as Ge,di as Ne,dj as oe,a6 as K,bC as Ae,P as Be,dk as Oe,y as ae,dl as ze,B as He,dm as We,dn as qe,dp as Ke,e as z,C as $,dq as Je}from"./main-1.0.15.js";import{a as C,aG as ne,N as xe,c as P,B as g,u as H,aH as Xe,as as de,aI as Ye,av as Ze,aw as Qe,ax as $e,ay as De,D as ge,e as Me,A as Ie,g as es,h as ss}from"./main-1.0.15-e2ad00f6.js";import{A as ce,C as ue,a as pe,B as D}from"./useScreenSize-1.0.15-a1dd46fa.js";import{u as me,S as is,a as ts,I as J,b as ns,c as rs,d as M,T as ls,M as os,P as as,D as ds,e as cs,f as us,g as ps,h as xs}from"./useMetadataColumns-1.0.15-a0d5d42d.js";import{S as X,a as E,C as he,R as gs,B as ms,b as hs,c as fs,d as js,e as I,k as bs}from"./settings-1.0.15-3913c57c.js";import{i as ys}from"./index.esm-1.0.15-3dc3cbe3.js";import{u as F,S as Ss}from"./SettingsFormRelationships-1.0.15-8b815d08.js";import{u as fe}from"./useStoreTable-1.0.15-ce8ace5b.js";import{d as Cs,e as Ts,c as vs}from"./index.esm-1.0.15-8ab178c0.js";import{P as A}from"./PremiumFeature-1.0.15-58839b47.js";import{E as ee}from"./EnumTypeEnum-1.0.15-7ffcf33a.js";import{A as L,a as V}from"./AccordionSummary-1.0.15-ad1892ca.js";import{A as R,L as ie}from"./Link-1.0.15-0c287b6b.js";import{F as S,b as y,a as h,T as k}from"./TextField-1.0.15-73384817.js";import{a as Fs,S as ws}from"./ScopeEnum-1.0.15-32d3ffad.js";import{R as te}from"./RadioGroup-1.0.15-f84d6091.js";import{R as T}from"./Radio-1.0.15-7d52029a.js";import{F as G}from"./FormControlLabel-1.0.15-2f48df6c.js";import{I as N,T as Us}from"./iconBase-1.0.15-5866dbfd.js";import{u as ks}from"./useFormStore-1.0.15-33a2aa16.js";import{C as j}from"./CssUnitTextField-1.0.15-59b5f257.js";import Ps from"./ThemeSettings-1.0.15-957988d2.js";import{T as se}from"./Tabs-1.0.15-c2b715a3.js";import"./ActionsDml-1.0.15-409ee4a6.js";import"./MenuItem-1.0.15-cb0e11e9.js";import"./Menu-1.0.15-3ae4ddd1.js";import"./index-1.0.15-c2b31918.js";import"./useTableUpdater-1.0.15-5d031e17.js";import"./Stepper-1.0.15-7dbc23a7.js";import"./Close-1.0.15-8d33e66c.js";import"./Checkbox-1.0.15-19533231.js";import"./DialogContent-1.0.15-e50a43f8.js";import"./useApp-1.0.15-ae446897.js";import"./ActionsApp-1.0.15-ae4a30d5.js";import"./ActionsExplorer-1.0.15-15df1613.js";import"./useSlot-1.0.15-4f7bfdbc.js";import"./index-1.0.15-3f6c5bf6.js";const Ls=({appId:s,columnIndex:n,tableColumn:i})=>{o.debug(s,n,i),C();const t=ne(s),r=xe(s);F(s);const a=l=>[];return e.jsxs(L,{disableGutters:!0,children:[e.jsxs(V,{expandIcon:e.jsx(P,{}),sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Cs,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Grid positioning"})]}),e.jsxs(R,{sx:{paddingTop:"0.5rem"},children:[e.jsxs(g,{children:[e.jsxs(S,{sx:{display:"grid"},children:[e.jsx(y,{children:"Grid cells"}),e.jsx(Fs,{value:i.cells,min:1,max:r.cellsPerRow,step:1,marks:a(r.cellsPerRow),valueLabelDisplay:"auto",disabled:!0,onChange:(l,f)=>{o.debug(l,f)},sx:{width:"calc(100% - 40px)",margin:"20px"}})]}),e.jsx(h,{children:"Number of grid cells used (can be changed in FORM > Grid)."}),e.jsxs(S,{sx:{width:"100%"},children:[e.jsx(y,{sx:{margin:"15px 0 5px 0"},children:"Grid positioning"}),e.jsx(te,{sx:{flexDirection:"column",alignContent:"flex-start",marginLeft:"10px",marginBottom:"5px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",justifyContent:"center",alignItems:"center"},children:[e.jsxs(y,{className:"align-label-radio",children:[e.jsx(T,{checked:i.cellClass===Z.AUTO,disabled:!0,onChange:l=>{l.stopPropagation()}}),"Auto"]}),e.jsxs(y,{className:"align-label-radio",children:[e.jsx(T,{checked:i.cellClass===Z.START,disabled:!0,onChange:l=>{l.stopPropagation()}}),"Start"]}),e.jsxs(y,{className:"align-label-radio",children:[e.jsx(T,{checked:i.cellClass===Z.END,disabled:!0,onChange:l=>{l.stopPropagation()}}),"End"]}),e.jsxs(y,{children:[e.jsx(T,{checked:typeof i.cellClass=="number",disabled:!0,onChange:l=>{l.stopPropagation()}}),"Add"]}),e.jsxs("div",{style:{marginLeft:"10px",gridColumn:"span 2",display:"grid",gridTemplateColumns:"auto auto",alignItems:"center"},children:[e.jsx(k,{id:"pp-cells-before",sx:{width:"60px"},className:"pp-cells-before",type:"number",defaultValue:1,InputProps:{inputProps:{min:1,max:r.cellsPerRow-1}},disabled:!0,InputLabelProps:{shrink:!0},onChange:l=>{l.stopPropagation()}}),e.jsx(y,{sx:{marginLeft:"10px"},children:"cell(s) before"})]})]})})]}),e.jsx(h,{children:"Grid positioning relative to surrounding cells."}),i.computedField&&n!==void 0&&(t==null?void 0:t.columns[n])!==void 0&&t.columns[n].data_type==="enum"&&e.jsxs(g,{sx:{marginTop:"20px"},children:[e.jsx(y,{children:"Show values in"}),e.jsxs(te,{sx:{flexDirection:"column",alignContent:"flex-start",margin:"10px 0 5px 10px"},children:[e.jsxs(y,{className:"align-label-radio",children:[e.jsx(T,{checked:i.updatableEnum===void 0||i.updatableEnum===ee.LIST,disabled:!0,onChange:l=>{l.stopPropagation()}}),"Drop-down List"]}),e.jsxs(y,{className:"align-label-radio",children:[e.jsx(T,{checked:i.updatableEnum===ee.RADIO_HORIZONTAL,disabled:!0,onChange:l=>{l.stopPropagation()}}),"Horizontal radio group"]}),e.jsxs(y,{className:"align-label-radio",children:[e.jsx(T,{checked:i.updatableEnum===ee.RADIO_VERTICAL,disabled:!0,onChange:l=>{l.stopPropagation()}}),"Vertical radio group"]})]})]})]}),e.jsx(A,{single:!1})]})]})},Vs=({appId:s,columnIndex:n,tableColumn:i,columnMetaData:t})=>{o.debug(s,n,i),C(),F(s);const[r,a]=v.useState(!1);return i.computedField!==void 0||n===void 0||t===void 0||(t==null?void 0:t.data_type)!==void 0&&b(t.data_type)!=="number"?null:e.jsxs(L,{disableGutters:!0,children:[e.jsxs(V,{expandIcon:e.jsx(P,{}),sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Ts,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Validation"})]}),e.jsxs(R,{sx:{paddingTop:"1rem"},children:[e.jsxs(S,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsx(k,{error:r,type:"number",label:"Minimum value allowed",disabled:!0,value:i.numericMin??"",required:!1,InputLabelProps:{shrink:!0},onChange:l=>{o.debug(l)}}),e.jsx(k,{error:r,type:"number",label:"Maximum value allowed",disabled:!0,value:i.numericMax??"",required:!1,InputLabelProps:{shrink:!0},onChange:l=>{o.debug(l)}})]}),e.jsx(A,{})]})]})},Rs=({appId:s,columnIndex:n,tableColumn:i,columnMetaData:t})=>{o.debug(s,n,i,t);const r=C(),a=F(s),[l,f]=v.useState(!1),p=me(s),w={marginTop:"20px",marginLeft:"10px"};return e.jsxs(L,{disableGutters:!0,children:[e.jsxs(V,{expandIcon:e.jsx(P,{}),sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(vs,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Column settings"})]}),e.jsxs(R,{sx:{display:"grid",gridGap:"2rem",paddingTop:"1rem"},children:[(i.computedField||p[i.columnName]!==void 0&&(b(p[i.columnName].data_type)==="float"||b(p[i.columnName].data_type)==="number"||b(p[i.columnName].data_type)==="time"||b(p[i.columnName].data_type,!0)==="date"||b(p[i.columnName].data_type,!0)==="datetime"||b(p[i.columnName].data_type,!0)==="timestamp"||b(p[i.columnName].data_type,!0)==="time"))&&e.jsx(g,{children:e.jsxs(S,{children:[e.jsx(G,{control:e.jsx(X,{checked:!1,disabled:!0,onClick:x=>{x.stopPropagation()}}),label:"Localize",labelPlacement:"end"}),e.jsx(h,{children:i.computedField||p[i.columnName]!==void 0&&(b(p[i.columnName].data_type)==="float"||b(p[i.columnName].data_type)==="number")?"Localizes decimal and thousands seperators.":"Localizes date and time fields."})]})}),e.jsxs(S,{children:[e.jsx(k,{type:"text",variant:"outlined",label:"Default value",value:i.defaultValue??"",placeholder:(t==null?void 0:t.column_default)??"",InputLabelProps:{shrink:!0},onChange:x=>{r(ve({appId:s,index:n,defaultValue:x.target.value})),a(!0),x.stopPropagation()}}),e.jsxs(h,{component:"div",children:[e.jsx(e.Fragment,{children:(t==null?void 0:t.column_default)!==void 0&&(t==null?void 0:t.column_default)!==null&&(t==null?void 0:t.column_default)!==""&&e.jsx(g,{sx:{fontWeight:"bold"},children:"Leave empty to use column default constraint."})}),e.jsxs("div",{children:["Only applied on insert ",l?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:e.jsx(ie,{sx:{cursor:"pointer"},underline:"none",onClick:()=>{f(!1)},children:"(hide examples)"})}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Hello World"}),e.jsx("li",{children:"@wpda_wp_user_id"}),e.jsx("li",{children:"@now"})]}),e.jsx("div",{style:w,children:"Notes"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"@wpda_wp_user_id returns the WordPress user ID or 0 for anonymous requests"}),e.jsx("li",{children:"@now returns the current date/time and works with date/time fields only"}),e.jsxs("li",{children:["Column default constraints defined in the database are automatically applied",(t==null?void 0:t.column_default)!==void 0&&(t==null?void 0:t.column_default)!==null&&(t==null?void 0:t.column_default)!==""&&e.jsxs(e.Fragment,{children:[" (current value is ",e.jsx("strong",{children:t==null?void 0:t.column_default}),")"]})]})]})]}):e.jsx("span",{children:e.jsx(ie,{sx:{cursor:"pointer"},underline:"none",onClick:()=>{f(!0)},children:"(show examples)"})})]})]})]}),((t==null?void 0:t.data_type)!==void 0&&t.data_type.toLowerCase()!=="text"&&t.data_type.toLowerCase()!=="enum"&&t.data_type.toLowerCase()!=="set"&&t.column_type.toLowerCase()!=="tinyint(1)"&&(b(t.data_type)==="string"||b(t.data_type)==="number")||i.computedField)&&e.jsxs(S,{children:[e.jsx(g,{sx:{display:"grid",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:e.jsxs(e.Fragment,{children:[e.jsx(k,{type:"text",variant:"outlined",label:"Prefix",value:i.prefix,disabled:!0,InputLabelProps:{shrink:!0},onChange:x=>{x.stopPropagation()}}),e.jsx(k,{type:"text",variant:"outlined",label:"Suffix",value:i.suffix,disabled:!0,InputLabelProps:{shrink:!0},onChange:x=>{x.stopPropagation()}})]})}),e.jsx(h,{children:"Adds a prefix and/or suffix to the column content."})]}),e.jsxs(S,{children:[e.jsx(k,{type:"text",variant:"outlined",label:"CSS classes",fullWidth:!0,value:i.classNames,disabled:!0,InputLabelProps:{shrink:!0},onChange:x=>{x.stopPropagation()}}),e.jsx(h,{children:"CSS classes (seperated by spaces) for custom styling."})]}),e.jsxs(S,{children:[e.jsx(k,{type:"text",variant:"outlined",label:"Hint",fullWidth:!0,value:i.hint,disabled:!0,InputLabelProps:{shrink:!0},onChange:x=>{x.stopPropagation()}}),e.jsx(h,{children:"Help text displayed below data entry field."})]}),e.jsx(A,{single:!1,margin:"0"})]})]})},_s=({appId:s,columnIndex:n,tableColumn:i})=>{var x,_;o.debug(s,n,i);const t=C(),r=F(s),a=fe(s),l=ne(s),p=me(s)[i.columnName],w=(O,B)=>{t(Fe({appId:s,index:O,lookup:B})),r(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(Ls,{appId:s,columnIndex:n,tableColumn:i}),e.jsx(Rs,{appId:s,columnIndex:n,tableColumn:i,columnMetaData:p}),(((x=l==null?void 0:l.privs)==null?void 0:x.insert)||((_=l==null?void 0:l.privs)==null?void 0:_.update))&&(a.table.transactions.insert||a.table.transactions.update)&&e.jsx(Vs,{appId:s,columnIndex:n,tableColumn:i,columnMetaData:p}),e.jsx(is,{appId:s,columnIndex:n,tableColumn:i,columnMetaData:p,setLookup:w}),e.jsx(ts,{columnMetaData:p})]})};v.lazy(()=>we(()=>import("./ComputedFieldMore-1.0.15-4c71a52a.js"),["./ComputedFieldMore-1.0.15-4c71a52a.js","./main-1.0.15.js","./main-1.0.15-e2ad00f6.js","./iconBase-1.0.15-5866dbfd.js","./main-1.0.15-b0d40d19.css","./settings-1.0.15-3913c57c.js","./FormControlLabel-1.0.15-2f48df6c.js","./TextField-1.0.15-73384817.js","./Close-1.0.15-8d33e66c.js","./Menu-1.0.15-3ae4ddd1.js","./useScreenSize-1.0.15-a1dd46fa.js","./DialogContent-1.0.15-e50a43f8.js","./Tabs-1.0.15-c2b715a3.js","./settings-1.0.15-a01eb26f.css","./index.esm-1.0.15-3dc3cbe3.js","./MenuItem-1.0.15-cb0e11e9.js"],import.meta.url));const Es=({appId:s,columnIndex:n})=>{o.debug(s,n);const i=C(),t=fe(s),r=H(d=>Ue(d,s,n));o.debug("tableColumn",r);const a=F(s),l=(d,m)=>{o.debug(d,m),i(Pe({appId:s,index:d,visible:m})),a(!0)},f=(d,m)=>{o.debug(d,m),i(Le({appId:s,index:d,more:m})),a(!0)},p=(d,m)=>{o.debug(d,m),i(Ve({appId:s,index:d,updatable:m})),a(!0)};ke.TEXT;const[w,x]=v.useState(!1),[_,O]=v.useState(void 0),B=d=>{d!==void 0&&(i(Re({appId:s,index:d})),a(!0))},W=(d,m,q)=>(o.debug(d,m,q),e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(ns,{id:d,enabled:!1})}),e.jsxs(g,{sx:{display:"inline-grid",gridTemplateColumns:r.computedField!==void 0?"auto auto":"auto",justifyContent:"start",alignItems:"center",gap:"10px","& svg":{opacity:"0.5"}},children:[r.computedField!==void 0&&e.jsx(ys,{}),e.jsx(y,{children:m})]})]}));return e.jsxs(e.Fragment,{children:[e.jsxs(L,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsxs(V,{className:"pp-column-settings",expandIcon:e.jsx(P,{}),sx:{justifyContent:"space-between"},children:[e.jsx(g,{sx:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center","& svg":{display:"flex"}},children:W(r.columnName,r.columnLabel,n)}),e.jsxs(g,{style:{display:"grid",gridTemplateColumns:"40px 40px 40px"},children:[e.jsx(E,{title:"Visibility",position:"bottom",children:e.jsx(N,{onClick:d=>{r.visible?r.more?(l(n,!1),f(n,!1)):f(n,!0):r.more?f(n,!1):l(n,!0),d.stopPropagation()},children:r.visible?e.jsx(e.Fragment,{children:r.more?e.jsx(J,{checked:!0,children:e.jsx(Xe,{})}):e.jsx(J,{checked:!0,children:e.jsx(de,{})})}):e.jsx(J,{checked:!1,children:e.jsx(de,{})})})}),r.computedField?e.jsx(e.Fragment,{children:e.jsx(E,{title:"Delete",position:"bottom",children:e.jsx(N,{onClick:d=>{x(!0),O(n),d.stopPropagation()},children:e.jsx(Ze,{})})})}):e.jsx(E,{title:"Updatable",position:"bottom",disabled:!t.table.transactions.insert&&!t.table.transactions.update,children:e.jsx(N,{disabled:!t.table.transactions.insert&&!t.table.transactions.update,onClick:d=>{p(n,!r.updatable),d.stopPropagation()},children:e.jsx(J,{checked:r.updatable&&(t.table.transactions.insert||t.table.transactions.update),disabled:!t.table.transactions.insert&&!t.table.transactions.update,children:e.jsx(Ye,{})})})}),e.jsx(E,{title:"Alignment",position:"bottom",children:e.jsxs(N,{onClick:d=>{r.alignment===U.LEFT?i(Q({appId:s,index:n,alignment:U.CENTER})):r.alignment===U.CENTER?i(Q({appId:s,index:n,alignment:U.RIGHT})):r.alignment===U.RIGHT&&i(Q({appId:s,index:n,alignment:U.LEFT})),a(!0),d.stopPropagation()},children:[r.alignment===U.LEFT&&e.jsx(Qe,{}),r.alignment===U.CENTER&&e.jsx($e,{}),r.alignment===U.RIGHT&&e.jsx(De,{})]})})]})]}),e.jsx(R,{children:e.jsx(_s,{appId:s,columnIndex:n,tableColumn:r})})]},n),e.jsx(he,{title:"Delete computed field?",message:"Are you sure you want to delete this computed field? This action cannot be undone!",open:w,setOpen:x,onConfirm:()=>B(_)})]})},Gs=({appId:s})=>{o.debug(s),C();const n=rs(M(as),M(os),M(ls));F(s);const i=r=>{const{active:a,over:l}=r;(a==null?void 0:a.id)!==(l==null?void 0:l.id)&&o.debug(a,l)},t=H(r=>_e(r,s));return t===void 0||t.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx(ds,{autoScroll:!0,sensors:n,collisionDetection:cs,onDragEnd:i,children:e.jsx(us,{items:t,children:t.map((r,a)=>e.jsx(ps,{id:r,children:e.jsx(Es,{appId:s,columnIndex:a})},r))})}),e.jsx(xs,{appId:s,target:ge.FORM})]})},Ns=()=>{const s=H(n=>Ee(n));return o.debug("hideThemeSetting",s),s},As=({appId:s,formSettings:n})=>(C(),F(s),e.jsxs(L,{defaultExpanded:!1,disableGutters:!0,children:[e.jsx(V,{expandIcon:e.jsx(P,{}),children:"Field layout"}),e.jsxs(R,{sx:{display:"grid",gap:"20px"},children:[e.jsxs(S,{children:[e.jsxs(te,{value:n.fieldVariant,sx:{flexDirection:"row"},onChange:i=>{o.debug(i)},children:[e.jsx(G,{control:e.jsx(T,{disabled:!0}),value:"outlined",label:"Outlined"},"outlined"),e.jsx(G,{control:e.jsx(T,{disabled:!0}),value:"filled",label:"Filled"},"filled"),e.jsx(G,{control:e.jsx(T,{disabled:!0}),value:"standard",label:"Standard"},"standard")]}),e.jsx(h,{children:"Applies to data entry forms only."})]}),e.jsx(G,{control:e.jsx(X,{checked:n.hideHintsInViewMode,disabled:!0,onChange:(i,t)=>{i.stopPropagation()}}),label:"Hide hints in view mode",labelPlacement:"end"}),e.jsx(A,{})]})]})),Bs=({appId:s,formSettings:n,updateSettings:i})=>{C(),F(s);const[t,r]=v.useState(!1);return e.jsxs(L,{defaultExpanded:!1,disableGutters:!0,children:[e.jsx(V,{expandIcon:e.jsx(P,{}),children:"Grid"}),e.jsxs(R,{sx:{display:"grid",gridTemplateColumns:"repeat(1, 1fr)",gap:"20px",marginTop:"5px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsx(k,{type:"number",label:"Cells per row",value:n.cellsPerRow,disabled:!0,InputLabelProps:{shrink:!0},onChange:a=>{o.debug(a)}}),e.jsx(j,{label:"Space between cells",textField:{cssValue:n.spacing.betweenCells,cssUnit:n.spacing.betweenCellsUnit},defaultValue:{cssValue:c.betweenCells,cssUnit:c.betweenCellsUnit},updateSettings:a=>{o.debug(a)}})]}),e.jsx(G,{control:e.jsx(X,{disabled:!0,checked:n.showGrid,onChange:(a,l)=>{o.debug(a,l)}}),label:"Show grid"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginTop:"10px"},children:[e.jsx(j,{label:"Padding top",textField:{cssValue:n.spacing.aroundGridTop,cssUnit:n.spacing.aroundGridTopUnit},defaultValue:{cssValue:c.aroundGridTop,cssUnit:c.aroundGridTopUnit},updateSettings:a=>{o.debug(a)}}),e.jsx(j,{label:"Padding bottom",textField:{cssValue:n.spacing.aroundGridBottom,cssUnit:n.spacing.aroundGridBottomUnit},defaultValue:{cssValue:c.aroundGridBottom,cssUnit:c.aroundGridBottomUnit},updateSettings:a=>{o.debug(a)}}),e.jsx(j,{label:"Padding left",textField:{cssValue:n.spacing.aroundGridLeft,cssUnit:n.spacing.aroundGridLeftUnit},defaultValue:{cssValue:c.aroundGridLeft,cssUnit:c.aroundGridLeftUnit},updateSettings:a=>{o.debug(a)}}),e.jsx(j,{label:"Padding right",textField:{cssValue:n.spacing.aroundGridRight,cssUnit:n.spacing.aroundGridRightUnit},defaultValue:{cssValue:c.aroundGridRight,cssUnit:c.aroundGridRightUnit},updateSettings:a=>{o.debug(a)}})]}),e.jsxs(h,{component:"div",sx:{marginTop:"10px"},children:[e.jsxs(ie,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>r(!t),children:[e.jsx(Me,{}),"How to use the grid?"]}),t&&e.jsxs(g,{sx:{marginTop:"20px",display:"grid",gap:"20px"},children:[e.jsxs(g,{children:["All form fields are organized into a form grid, which consists of ",e.jsx("strong",{children:"rows"})," and ",e.jsx("strong",{children:"cells"}),'. Each row contains a fixed number of cells, determined by the "Cells per row" setting. The grid ensures consistent layout and alignment for all form fields.']}),e.jsxs(g,{children:["Each form field can occupy from 1 to n cells, where n is the number of cells per row. This value can be adjusted on a per-column basis in ",e.jsx("strong",{children:"Grid positioning"}),". To access the grid position for a specific column, open the ",e.jsx("strong",{children:"COLUMNS"})," section, navigate to the column, and select the ",e.jsx("strong",{children:"Grid positioning"})," option. Grid positioning allows you to adjust the display of empty cells before a field or position a field at the beginning or end of a row."]}),e.jsxs(g,{children:["The grid can be displayed during form design to visualize column positioning and spacing. This feature is available only in the ",e.jsx("strong",{children:"Form Builder"})," and is not visible during runtime."]})]})]}),e.jsx(A,{single:!1})]})]})},Os=({formSettings:s,updateSettings:n})=>e.jsxs(L,{defaultExpanded:!1,disableGutters:!0,children:[e.jsx(V,{expandIcon:e.jsx(P,{}),children:"Cells"}),e.jsxs(R,{style:{display:"grid",gridTemplateColumns:"repeat(1, 1fr)"},children:[e.jsxs(S,{children:[e.jsxs(g,{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginTop:"5px"},children:[e.jsx(j,{label:"Padding top",textField:{cssValue:s.spacing.cellTop,cssUnit:s.spacing.cellTopUnit},defaultValue:{cssValue:c.cellTop,cssUnit:c.cellTopUnit},updateSettings:i=>{o.debug(i)}}),e.jsx(j,{label:"Padding bottom",textField:{cssValue:s.spacing.cellBottom,cssUnit:s.spacing.cellBottomUnit},defaultValue:{cssValue:c.cellBottom,cssUnit:c.cellBottomUnit},updateSettings:i=>{o.debug(i)}}),e.jsx(j,{label:"Padding left",textField:{cssValue:s.spacing.cellLeft,cssUnit:s.spacing.cellLeftUnit},defaultValue:{cssValue:c.cellLeft,cssUnit:c.cellLeftUnit},updateSettings:i=>{o.debug(i)}}),e.jsx(j,{label:"Padding right",textField:{cssValue:s.spacing.cellRight,cssUnit:s.spacing.cellRightUnit},defaultValue:{cssValue:c.cellRight,cssUnit:c.cellRightUnit},updateSettings:i=>{o.debug(i)}})]}),e.jsx(h,{sx:{marginTop:"20px"},children:"Spacing around cells."})]}),e.jsx(A,{single:!1})]})]}),zs=({formSettings:s,updateSettings:n})=>e.jsxs(L,{defaultExpanded:!1,disableGutters:!0,children:[e.jsx(V,{expandIcon:e.jsx(P,{}),children:"Field spacing"}),e.jsxs(R,{sx:{display:"grid"},children:[e.jsxs(S,{children:[e.jsxs(g,{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginTop:"5px"},children:[e.jsx(j,{label:"Padding top",textField:{cssValue:s.spacing.fieldTop,cssUnit:s.spacing.fieldTopUnit},defaultValue:{cssValue:c.fieldTop,cssUnit:c.fieldTopUnit},updateSettings:i=>{o.debug(i)}}),e.jsx(j,{label:"Padding bottom",textField:{cssValue:s.spacing.fieldBottom,cssUnit:s.spacing.fieldBottomUnit},defaultValue:{cssValue:c.fieldBottom,cssUnit:c.fieldBottomUnit},updateSettings:i=>{o.debug(i)}}),e.jsx(j,{label:"Padding left",textField:{cssValue:s.spacing.fieldLeft,cssUnit:s.spacing.fieldLeftUnit},defaultValue:{cssValue:c.fieldLeft,cssUnit:c.fieldLeftUnit},updateSettings:i=>{o.debug(i)}}),e.jsx(j,{label:"Padding right",textField:{cssValue:s.spacing.fieldRight,cssUnit:s.spacing.fieldRightUnit},defaultValue:{cssValue:c.fieldRight,cssUnit:c.fieldRightUnit},updateSettings:i=>{o.debug(i)}})]}),e.jsx(h,{sx:{marginTop:"20px"},children:"Spacing within data entry fields."})]}),e.jsx(A,{single:!1})]})]}),Hs=({appId:s,formSettings:n})=>{var a;const i=C(),t=F(s),r=ne(s);return!((a=r==null?void 0:r.privs)!=null&&a.update)||r.primary_key.length===0?null:e.jsxs(L,{defaultExpanded:!1,disableGutters:!0,children:[e.jsx(V,{expandIcon:e.jsx(P,{}),children:"Null value handling"}),e.jsxs(R,{sx:{display:"grid"},children:[e.jsx(G,{control:e.jsx(X,{checked:n.preserveSpacesOnUpdate,onChange:(l,f)=>{i(Ge({appId:s,preserveSpaces:f})),t(!0),l.stopPropagation()}}),label:"Preserve empty strings on update",labelPlacement:"end"}),e.jsx(h,{children:"Enable to preserve empty strings for mandatory columns. Works only if the actual column value contains an empty spaces. Does not allow strings to be emptied."}),e.jsx(h,{children:"This feature is enabled by default on WordPress tables."}),e.jsx(h,{sx:{fontWeight:"bold"},children:"Do NOT change the default unless you really need to!"})]})]})},Ws=()=>{const s=H(n=>Ne(n));return o.debug("isRelationForm",s),s},qs=({appId:s})=>{o.debug(s),C(),F(s);const n=Ws(),i=xe(s),t=r=>{o.debug(r)};return e.jsxs(e.Fragment,{children:[n!==!0&&e.jsx(Ss,{appId:s,updateSettings:t}),e.jsx(As,{appId:s,formSettings:i}),e.jsx(Bs,{appId:s,formSettings:i,updateSettings:t}),e.jsx(Os,{formSettings:i,updateSettings:t}),e.jsx(zs,{formSettings:i,updateSettings:t}),e.jsx(Hs,{appId:s,formSettings:i})]})},Ui=({appId:s})=>{var re,le;o.debug(s);const n=C(),i=Ns(),[t,r]=v.useState(oe(K.getState(),s));o.debug(t);const a=ks(s),[l,f]=v.useState(Ae(K.getState(),s));o.debug(l);const p=()=>Ke(K.getState(),s),w=u=>{n(ze({appId:s,isUpdated:u}))},[x,_]=v.useState(!1),O=((re=ce)==null?void 0:re.palette.mode)===Be.LIGHT?(le=ce)==null?void 0:le.palette.primary.main:"",B=u=>{n(He({anchor:u}))},W=()=>{t!==void 0&&n(We({appId:s,formState:t}))},d=()=>{n(qe({})),w(!1)},m=()=>{p()?_(!0):(W(),d())},q=()=>{bs(s,ws.GLOBAL,u=>{if(o.debug(u),u!=null&&u.code&&(u==null?void 0:u.message)!==void 0)switch(u.code){case"ok":r(oe(K.getState(),s)),z(u.message,{variant:"success"}),a.columns.map((Y,Te)=>{Y.lookup!==void 0&&n(Je({appId:s,index:Te}))});break;case"info":z(u.message,{variant:"info"});break;default:o.error(u),z(u.message??$.contactSupport,{variant:"error"})}else o.error(u),z($.contactSupport,{variant:"error"})},u=>{o.error("error",u),z(u??$.contactSupport,{variant:"error"})}),w(!1)},je=()=>{p()?(q(),setTimeout(()=>{d()},1e3)):d()},[be,ye]=v.useState("1"),Se=(u,Y)=>{ye(Y)},Ce=H(u=>Oe(u,s));return e.jsx(e.Fragment,{children:Ce&&e.jsxs(e.Fragment,{children:[e.jsxs(gs,{closeDrawer:m,children:[e.jsx(Ie,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(es,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Us,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Form Builder"}),e.jsx(E,{title:"Dock to left",position:"bottom",children:e.jsx(N,{onClick:()=>{B(ae.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ms,{})})}),e.jsx(E,{title:"Dock to right",position:"bottom",children:e.jsx(N,{onClick:()=>{B(ae.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(hs,{})})}),e.jsx(E,{title:"Close",position:"bottom",children:e.jsx(N,{onClick:m,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ss,{})})})]})}),e.jsx(ue,{className:"pp-settings-container",children:e.jsx(pe,{sx:{padding:0,margin:0},children:e.jsxs(fs,{value:be,children:[e.jsxs(js,{variant:"fullWidth",textColor:"primary",onChange:Se,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(se,{label:"Form",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(se,{label:"Columns",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),i!==!0&&e.jsx(se,{label:"Theme",value:"3",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(g,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(I,{value:"1",children:e.jsx(qs,{appId:s})}),e.jsx(I,{value:"2",className:"pp-column-settings-container",children:e.jsx(Gs,{appId:s})}),i!==!0&&e.jsx(I,{value:"3",children:e.jsx(Ps,{appId:s,source:ge.FORM,setIsUpdated:w})})]})]})})}),e.jsx(ue,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:O},children:e.jsxs(pe,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(D,{variant:"outlined",className:"footer_action_button_apply",onClick:q,children:"Apply"}),e.jsx(D,{variant:"outlined",className:"footer_action_button",onClick:je,children:"OK"}),e.jsx(D,{variant:"outlined",className:"footer_action_button",onClick:m,children:"Cancel"})]})})]}),e.jsx(he,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:x,setOpen:_,onConfirm:()=>{W(),d()},onKeep:()=>{d()}})]})})};export{Ui as default};
